!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FE=e():t.FE=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Feature=e.Geometry=e.Format=e.Overlay=e.Interaction=e.Control=e.Const=e.Earth=void 0;var i=n(1),r=n(3),a=n(51),o=n(53),s=n(52),h=n(54),u=n(56),l=n(57),c=n(58),f=n(59),m=n(60),p=n(61),M=n(62),y=n(63),d=n(64),_=n(70),v=n(65),b=n(66),g=n(67),x=n(68),E=n(69),w={};w.Attribution=a.AttributionControl,w.Zoom=o.ZoomControl,w.Control=s.Control;var S={};S.DoubleClickZoom=h.DoubleClickZoomInteraction,S.Drag=u.DragInteraction,S.MouseWheelZoom=l.MouseWheelZoomInteraction;var I={};I.Overlay=c.Overlay,I.Icon=f.IconOverlay,I.Label=m.LabelOverlay,I.Marker=p.MarkerOverlay,I.Popup=M.PopupOverlay,I.Layer=y.OverlayLayer;var P={};P.Format=d.Format,P.GeoJSON=_.GeoJSON;var O={};O.Geometry=b.Geometry,O.Point=g.Point,O.LineString=x.LineString,O.Polygon=E.Polygon,e.Earth=i.Earth,e.Const=r.Const,e.Control=w,e.Interaction=S,e.Overlay=I,e.Format=P,e.Geometry=O,e.Feature=v.Feature},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Earth=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),h=n(35),u=n(36),l=n(5),c=n(47),f=n(3),m=n(49),p=n(14),M=n(11),y=n(50),d=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._resolutions=[78271.517,39135.7585,19567.8792,9783.9396,4891.9698,2445.9849,1222.9925,611.4962,305.7481,152.8741,76.437,38.2185,19.1093,9.5546,4.7773,2.3887,1.1943,.5972,.2986,.1493,.0746,.0373,.0187],n._container=document.getElementById(t),n._context=new h.Context(n._container),n._camera=new u.Camera,n._zoom=0,n._camera.aspect=n._context.gl.viewportWidth/n._context.gl.viewportHeight,n._view=new y.View(n._context,n._camera),n._sourceLayers=[],n._interactions=[],n._controls=[],n._overlayLayers=[],n._eventType=new Map([["click",f.Const.EarthEventType.CLICK],["dblclick",f.Const.EarthEventType.DBLCLICK],["mousedown",f.Const.EarthEventType.MOUSEDOWN],["mouseup",f.Const.EarthEventType.MOUSEUP],["mouseover",f.Const.EarthEventType.MOUSEOVER],["mouseout",f.Const.EarthEventType.MOUSEOUT],["mousemove",f.Const.EarthEventType.MOUSEMOVE],["mousewheel",f.Const.EarthEventType.MOUSEWHEEL],["keypress",f.Const.EarthEventType.KEYPRESS]]),c.DomEvent.on(n._context.canvas,Array.from(n._eventType.keys()),n._handleDOMEvent,n),n.setZoom(3),n}return a(e,t),o(e,[{key:"panByDelta",value:function(t,e){e&&this._camera.setEyeLatitude(this._camera.eyeLatitude+2*e*this._view.getResolution(this.zoom)*360/(Math.PI*f.Const.EARTH_RADIUS)),t&&this._camera.setEyeLongitude(this._camera.eyeLongitude+2*t*this._view.getResolution(this.zoom)*360/(Math.PI*f.Const.EARTH_RADIUS)),this.render()}},{key:"setZoom",value:function(t){var e=Math.floor(t);if(e>f.Const.MAX_ZOOM?e=f.Const.MAX_ZOOM:e<f.Const.MIN_ZOOM&&(e=f.Const.MIN_ZOOM),e!==this._zoom){this.trigger(f.Const.EarthEventType.ZOOM_START,{oldLevel:this._zoom,newLevel:e}),this._zoom=e;var n=this._calcViewRange(this._zoom);this._camera.calcAltitude(n),this._view.calcZoom(),this.render(),this.trigger(f.Const.EarthEventType.ZOOM_END,{oldLevel:this._zoom,newLevel:e})}}},{key:"_calcViewRange",value:function(t){var e=this._resolutions[t-1],n=this._context.gl,i=n.viewportHeight>n.viewportWidth?n.viewportWidth:n.viewportHeight,r=i*e;return 2*r*Math.PI/(2*Math.PI*f.Const.EARTH_RADIUS)}},{key:"_calcZoom",value:function(){for(var t=this._camera.getViewRange(),e=this._context.gl,n=e.viewportHeight>e.viewportWidth?e.viewportWidth:e.viewportHeight,i=2*Math.PI*f.Const.EARTH_RADIUS*(.5*t/Math.PI),r=i/n,a=0,o=this._resolutions.length;a<o;a++)if(this._resolutions[a]<r){this._zoom=a+1;break}console.log(" zoom = "+this._zoom),console.log(" range in rad = "+t);var s=p.FMath.toDegrees(t);console.log(" range = "+s);var h=this._camera.target;h.lat=h.lat%180,h.lng=h.lng%360,h.lng>180?h.lng=h.lng-360:h.lng<-180&&(h.lng=h.lng+360),h.lat>85.5?h.lat=85.5:h.lat<-85.5&&(h.lat=-85.5);var u={minLat:h.lat-s/4,maxLat:h.lat+s/4,minLng:h.lng-s/2,maxLng:h.lng+s/2};console.log(" ranges = "+JSON.stringify(u));var l=M.Proj.wgs842Mercator(u.minLng,u.minLat);console.log(" lefttop = "+JSON.stringify(l)+" ");var c=M.Proj.wgs842Mercator(u.maxLng,u.maxLat);console.log(" bottomRight = "+JSON.stringify(c)+" ");var m=256*this._resolutions[this._zoom-1],y=Math.floor((l.x+f.Const.EARTH_RADIUS*Math.PI)/m),d=Math.floor((l.y+f.Const.EARTH_RADIUS*Math.PI)/m);console.log("minTileX = "+y+", minTileY = "+d);var _=Math.floor((c.x+f.Const.EARTH_RADIUS*Math.PI)/m),v=Math.floor((c.y+f.Const.EARTH_RADIUS*Math.PI)/m);console.log("maxTileX = "+_+", maxTileY = "+v)}},{key:"getPixelCoordinate",value:function(t,e){var n=this._camera.getGLCoordinate(t,e);return{x:(1+n.x)/2*this._context.gl.viewportWidth,y:(1-(1+n.y)/2)*this._context.gl.viewportHeight}}},{key:"addLayer",value:function(t){var e=this,n=s.SourceLayer.from(this._view,t);n&&(n.source.on(f.Const.SourceEventType.CHANGE,function(){return e.render()}),this._sourceLayers.push(n),this.render())}},{key:"render",value:function(){var t=this,e=this._context.gl;e.viewport(0,0,e.viewportWidth,e.viewportHeight),e.clearColor(0,0,0,1),e.enable(e.CULL_FACE),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this._sourceLayers.forEach(function(e){return e.render(t._camera)}),this.trigger(f.Const.EarthEventType.RENDER_END)}},{key:"_handleDOMEvent",value:function(t){if(!t._stopped){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;e="wheel"===e?"mousewheel":e;var n=this._eventType.get(e),i={originalEvent:t};this.trigger(n,i)}}},{key:"addInteraction",value:function(t){return t.setEarth(this),t.enable(),this._interactions.push(t),this}},{key:"removeInteraction",value:function(t){for(var e=0,n=this._interactions.length;e<n;e++)if(this._interactions[e]===t){t.disable(),t.setEarth(null),this._interactions.splice(e,1);break}return this}},{key:"addControl",value:function(t){return t.setEarth(this),this._controls.push(t),this}},{key:"removeControl",value:function(t){for(var e=0,n=this._interactions.length;e<n;e++)if(this._controls[e]===t){t.dispose(),this._controls.splice(e,1);break}return this}},{key:"addOverlayLayer",value:function(t){t.setEarth(this),this._overlayLayers.push(t)}},{key:"removeOverlayLayer",value:function(t){for(var e=0,n=this._overlayLayers.length;e<n;e++)if(this._overlayLayers[e]===t){t.dispose(),this._overlayLayers.splice(e,1);break}return this}},{key:"clearOverlayLayers",value:function(){this._overlayLayers.forEach(function(t){return t.dispose()}),this._overlayLayers=[]}},{key:"setCenter",value:function(t,e){return this._camera.setTarget(t,e),this}},{key:"context",get:function(){return this._context}},{key:"zoom",get:function(){return this._view.zoom}},{key:"container",get:function(){return this._container}},{key:"size",get:function(){return m.Dom.getSize(this._container)}}]),e}(l.Observable);e.Earth=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SourceLayer=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(3),o=n(4),s=n(16),h=n(23),u=n(26),l=n(29),c=n(31),f=n(33),m=n(34);e.SourceLayer=function(){function t(){i(this,t)}return r(t,null,[{key:"from",value:function(t,e){return e.type===a.Const.LayerType.RASTER_TILE?new o.RasterTileLayer({source:new f.TileSource(e.url),view:t}):e.type===a.Const.LayerType.LINE?new h.LineLayer({source:new m.VectorSource(e.source),view:t}):e.type===a.Const.LayerType.FILL?new s.FillLayer({source:new m.VectorSource(e.source),view:t}):e.type===a.Const.LayerType.POINT?new u.PointLayer({source:new m.VectorSource(e.source),view:t}):e.type===a.Const.LayerType.CIRCLE?new l.CircleLayer({source:new m.VectorSource(e.source),view:t}):e.type===a.Const.LayerType.CIRCLE_FILL?new c.CircleFillLayer({source:new m.VectorSource(e.source),view:t}):null}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function r(){n(this,r)};i.EarthEventType={ZOOM_START:"earthZoomStart",ZOOM_END:"earthZoomEnd",CLICK:"earthClick",DBLCLICK:"earthDblclick",MOUSEDOWN:"earthMousedown",MOUSEUP:"earthMouseup",MOUSEOVER:"earthMouseover",MOUSEOUT:"earthMouseout",MOUSEMOVE:"earthMousemove",MOUSEWHEEL:"earthMousewheel",KEYPRESS:"earthKeypress",RENDER_END:"renderEnd"},i.SourceEventType={CHANGE:"sourceChange"},i.ControlEventType={RENDER:"controlRender"},i.GeomType={POINT:"Point",LINE:"LineString",POLYGON:"Polygon"},i.LayerType={POINT:"point",LINE:"line",FILL:"fill",CIRCLE:"circle",CIRCLE_FILL:"circleFill",RASTER_TILE:"rasterTile"},i.SourceType={LINE:"line"},i.OverlayPositioning={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},i.DomNodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},i.DomEventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEWHEEL:"mousewheel",KEYPRESS:"keypress"},i.EARTH_RADIUS=6378137,i.CIRCLE_BY_STEPS=64,i.MAX_ZOOM=18,i.MIN_ZOOM=3,e.Const=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RasterTileLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),h=n(6),u=n(9),l=n(10),c=n(15),f=n(11),m=n(3);e.RasterTileLayer=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._source=t.source,n._view=t.view,n._render=new h.RasterTileLayerRender(n._view.gl),n._renderList=[],n._renderVersion=-1,n._camera=null,n._tileRange={},n._curZoom=0,n._prepareRenderTiles=[],n}return a(e,t),o(e,[{key:"render",value:function(t){this._camera=t,this._buildRenderList(),this._prepareTiles(),this._render.render(this._prepareRenderTiles,t),this._renderVersion=this._renderVersion+1}},{key:"_prepareTiles",value:function(){this._prepareRenderTiles=[];for(var t=1<<this._curZoom-1,e=this._tileRange.minTileY;e<=this._tileRange.maxTileY;e++)for(var n=e%t,i=this._tileRange.minTileX;i<=this._tileRange.maxTileX;i++){var r=i%t,a=this._getRenderTile(this._curZoom-1,n,r);a&&this._prepareRenderTiles.push(a)}this._prepareRenderTiles.sort(function(t,e){return t.mesh.zoom-e.mesh.zoom})}},{key:"_getRenderTile",value:function(t,e,n){if(!(e<0||n<0)){var i=this._findTile(t,e,n);if(i)return i;if(2===t&&this._source.getTileImage(t,e,n),!(t<=2))return this._getRenderTile(t-1,Math.floor(e/2),Math.floor(n/2))}}},{key:"_calcTileRange",value:function(t){var e=f.Proj.wgs842Mercator(t.minLng,t.minLat),n=f.Proj.wgs842Mercator(t.maxLng,t.maxLat),i=256*this._view.getResolution(this._view.zoom),r=Math.floor((e.x+m.Const.EARTH_RADIUS*Math.PI)/i),a=Math.floor((m.Const.EARTH_RADIUS*Math.PI-n.y)/i),o=Math.ceil((n.x+m.Const.EARTH_RADIUS*Math.PI)/i),s=Math.ceil((m.Const.EARTH_RADIUS*Math.PI-e.y)/i),h=1<<this._view.zoom-1;return o<r&&(o+=h),s<a&&(s+=h),{minTileX:r,minTileY:a,maxTileX:o,maxTileY:s}}},{key:"_buildRenderList",value:function(){var t=this,e=this._view.zoom,n=1<<e-1;this._curZoom=e,this._tileRange=this._calcTileRange(this._view.viewRange),this._source.removeWaitRequests();var i=this._buildRenderTilesList(this._tileRange);i.forEach(function(i){var r=i.row%n,a=i.col%n;if(!(r<0||a<0)){var o=t._source.getTileImage(e-1,r,a);if(o){var s=new u.Tile({mesh:new l.TileMesh({zoom:e-1,row:r,col:a}),material:new c.ImageMaterial(o)});t._renderList.push(s)}}})}},{key:"_buildRenderTilesList",value:function(t){var e=[],n=Math.floor((t.minTileY+t.maxTileY)/2),i=Math.floor((t.minTileX+t.maxTileX)/2);e.push({row:n,col:i});for(var r=1;n-r>=t.minTileY||n+r<=t.maxTileY||i-r>=t.minTileX||i+r<=t.maxTileX;){if(n-r>=t.minTileY){var a=i-r;a<t.minTileX&&(a=t.minTileX);var o=i+r;o>t.maxTileX&&(o=t.maxTileX);for(var s=a;s<=o;s++)e.push({row:n-r,col:s})}if(i-r>=t.minTileX){var h=n-r+1;h<t.minTileY&&(h=t.minTileY);var u=n+r-1;u>t.maxTileY&&(u=t.maxTileY);for(var l=h;l<=u;l++)e.push({row:l,col:i-r})}if(i+r<=t.maxTileX){var c=n-r+1;c<t.minTileY&&(c=t.minTileY);var f=n+r-1;f>t.maxTileY&&(f=t.maxTileY);for(var m=c;m<=f;m++)e.push({row:m,col:i+r})}if(n+r<=t.maxTileY){var p=i-r;p<t.minTileX&&(p=t.minTileX);var M=i+r;M>t.maxTileX&&(M=t.maxTileX);for(var y=p;y<=M;y++)e.push({row:n+r,col:y})}r+=1}return e}},{key:"_exist",value:function(t,e,n){var i=this._renderList.findIndex(function(i){return i.mesh.zoom===t&&i.mesh.row===e&&i.mesh.col===n});return i!==-1}},{key:"_findTile",value:function(t,e,n){return this._renderList.find(function(i){return i.mesh.zoom===t&&i.mesh.row===e&&i.mesh.col===n})}},{key:"source",get:function(){return this._source}}]),e}(s.Observable)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Observable=function(){function t(){n(this,t)}return i(t,[{key:"on",value:function(t,e,n){this._listens=this._listens||{},this._listens[t]=this._listens[t]||[];var i={fn:e,ctx:n};return this._listens[t].push(i),this}},{key:"un",value:function(t,e,n){if(!t)return this;if(!this.hasListens(t))return this;for(var i=0,r=this._listens[t].length;i<r;i++){var a=this._listens[t][i];if(r>1){if(a.fn===e){this._listens[t].splice(i,1);break}}else delete this._listens[t]}return this}},{key:"unAll",value:function(){return delete this._listens,this}},{key:"once",value:function(t,e,n){var i=this,r=function a(){i.un(t,e,n),i.un(t,a,n)};return this.on(t,e,n).on(t,r,n)}},{key:"trigger",value:function(t,e){var n=this;if(!this.hasListens(t))return this;var i={};Object.assign(i,e),Object.assign(i,{type:t,target:this});var r=this._listens[t].slice();return r.forEach(function(t){return t.fn.call(t.ctx||n,i)}),this}},{key:"hasListens",value:function(t){return!(!this._listens||!this._listens[t])}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.RasterTileLayerRender=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(7),o=n(8);e.RasterTileLayerRender=function(){function t(e){i(this,t),this._gl=e,this._shaderProgram=null,this._setup()}return r(t,[{key:"_setup",value:function(){var t=this._gl,e=a.ShaderLoader.loadVertex(t,o.RasterTileShader.vertexSource),n=a.ShaderLoader.loadFragment(t,o.RasterTileShader.fragmentSource),i=t.createProgram();t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||console.error("Failed to setup shaders"),this._shaderProgram=i}},{key:"render",value:function(t,e){var n=this._gl,i=this._shaderProgram;n.useProgram(i),this._uploadModels(e),t.forEach(function(t){return t.render(n,i)})}},{key:"_uploadModels",value:function(t){var e=this._gl,n=this._shaderProgram,i=e.getUniformLocation(n,"uMVMatrix"),r=e.getUniformLocation(n,"uPMatrix");e.uniformMatrix4fv(i,!1,t.modelViewMatrix),e.uniformMatrix4fv(r,!1,t.projectionMatrix)}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r={FRAGMENT:Symbol(),VERTEX:Symbol()};e.ShaderLoader=function(){function t(){n(this,t)}return i(t,null,[{key:"loadVertex",value:function(t,e){return this.load(t,e,r.VERTEX)}},{key:"loadFragment",value:function(t,e){return this.load(t,e,r.FRAGMENT)}},{key:"load",value:function(t,e,n){var i=null;if(n===r.FRAGMENT)i=t.createShader(t.FRAGMENT_SHADER);else{if(n!==r.VERTEX)return console.error("invalid shader type: "+n),null;i=t.createShader(t.VERTEX_SHADER)}return t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.error(t.getShaderInfoLog(i)),null)}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.RasterTileShader=function(){function t(){n(this,t)}return i(t,null,[{key:"vertexSource",get:function(){return"\n          attribute vec3 aVertexPosition;\n          attribute vec2 aTextureCoordinates;\n\n          uniform mat4 uMVMatrix;\n          uniform mat4 uPMatrix;\n\n          varying vec2 vTextureCoordinates;\n\n          void main() {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n            vTextureCoordinates = aTextureCoordinates;  \n          } \n        "}},{key:"fragmentSource",get:function(){return"\n          precision mediump float;\n\n          varying vec2 vTextureCoordinates;\n          uniform sampler2D uSampler;\n          void main() {\n            gl_FragColor = texture2D(uSampler, vTextureCoordinates);\n          } \n        "}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Tile=function(){function t(e){n(this,t),this._mesh=e.mesh,this._material=e.material}return i(t,[{key:"render",value:function(t,e){this._mesh.setup(t),this._material.setup(t);var n=e,i={};i.vertexPositionAttributeLoc=t.getAttribLocation(n,"aVertexPosition"),i.vertexTextureAttributeLoc=t.getAttribLocation(n,"aTextureCoordinates"),i.uniformSamplerLoc=t.getUniformLocation(n,"uSampler"),t.enableVertexAttribArray(i.vertexPositionAttributeLoc),t.enableVertexAttribArray(i.vertexTextureAttributeLoc),this._mesh.bindPoint(t,i.vertexPositionAttributeLoc),this._mesh.bindTexture(t,i.vertexTextureAttributeLoc),this._mesh.bindIndex(t),t.uniform1i(i.uniformSamplerLoc,0),this._material.bindTexture(t,t.TEXTURE0),t.drawElements(t.TRIANGLES,this._mesh.triangleCount,t.UNSIGNED_SHORT,0),this._material.unBind(t)}},{key:"mesh",get:function(){return this._mesh}}]),t}()},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.TileMesh=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(11),h=n(13),u=256,l=16;e.TileMesh=function(){function t(e){r(this,t),this._zoom=e.zoom,this._row=e.row,this._col=e.col,this._vertices=[],this._uvs=[],this._elementIndexes=[],this._radius=o.Const.EARTH_RADIUS,this._bound={},this._createMesh()}return a(t,[{key:"_getMetersPerPixel",value:function(t){return 2*this._radius*Math.PI/(Math.pow(2,t)*u)}},{key:"_calcMercatorBound",value:function(){var t=this._getMetersPerPixel(this._zoom),e=Math.pow(2,this._zoom),n=e*u*t,i=n/2;this._bound.N=this._row*(u*t),this._bound.W=this._col*(u*t),this._bound.N=i-this._bound.N,this._bound.W=this._bound.W-i,this._bound.E=this._bound.W+u*t,this._bound.S=this._bound.N-u*t}},{key:"_calcLatLng",value:function(t,e,n,i){var r=s.Proj.mercator2Wgs84(t,e);return n?r.lat=90:i&&(r.lat=-90),r}},{key:"_createMesh",value:function(){var t=new h.Sphere(this._radius);this._calcMercatorBound();for(var e=Math.abs(this._bound.E-this._bound.W)/l,n=(1<<this._zoom)-1,r=[],a=0;a<=l;a++){for(var o=[],s=0;s<=l;s++){var u,c=this._bound.N-a*e,f=this._bound.W+s*e,m=this._calcLatLng(f,c,0===this._row&&0===a,this._row===n&&a===l);(u=this._vertices).push.apply(u,i(t.getXYZ(m.lng,m.lat))),o.push(this._vertices.length/3-1);var p=s/l,M=a/l;this._uvs.push(p,1-M)}r.push(o)}for(var y=[],d=0;d<l;d++)for(var _=0;_<l;_++)y.push(r[d][_+1],r[d][_],r[d+1][_]),y.push(r[d][_+1],r[d+1][_],r[d+1][_+1]);this._elementIndexes=y}},{key:"setup",value:function(t){this.vertexIndexBuffer||(this.vertexPosBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._vertices),t.STATIC_DRAW),this.VERTEX_POS_BUF_ITEM_SIZE=3,this.vertexTextureCoordinateBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexTextureCoordinateBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._uvs),t.STATIC_DRAW),this.VERTEX_TEX_COORD_BUF_ITEM_SIZE=2,this.vertexIndexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this._elementIndexes),t.STATIC_DRAW),this.VERTEX_INDEX_BUF_ITEM_SIZE=1,this.VERTEX_INDEX_BUF_NUM_ITEMS=this._elementIndexes.length)}},{key:"bindPoint",value:function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.vertexAttribPointer(e,this.VERTEX_POS_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"bindTexture",value:function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.vertexTextureCoordinateBuffer),t.vertexAttribPointer(e,this.VERTEX_TEX_COORD_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"bindIndex",value:function(t){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)}},{key:"zoom",get:function(){return this._zoom}},{key:"row",get:function(){return this._row}},{key:"col",get:function(){return this._col}},{key:"triangleCount",get:function(){return this.VERTEX_INDEX_BUF_NUM_ITEMS}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Proj=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(12),s=i(o),h=n(3),u="+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 \n    +a="+h.Const.EARTH_RADIUS+" +b="+h.Const.EARTH_RADIUS+" \n    +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",l=(0,s["default"])(u);e.Proj=function(){function t(){r(this,t)}return a(t,null,[{key:"mercator2Wgs84",value:function(t,e){var n=l.inverse([t,e]);return{lat:n[1],lng:n[0]}}},{key:"wgs842Mercator",value:function(t,e){var n=l.forward([t,e]);return{y:n[1],x:n[0]}}}]),t}()},function(t,e){!function(n){if("object"==typeof e)t.exports=n();else if("function"==typeof define&&define.amd)define(n);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.proj4=n()}}(function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var h="function"==typeof require&&require;if(!s&&h)return h(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&"undefined"==typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var r=t("mgrs");i.fromMGRS=function(t){return new i(r.toPoint(t))},i.prototype.toMGRS=function(t){return r.forward([this.x,this.y],t)},e.exports=i},{mgrs:67}],2:[function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t);e=e||function(t){if(t)throw t};var n=r(t);if("object"!=typeof n)return void e(t);var o=s(n),h=i.projections.get(o.projName);h?(a(this,o),a(this,h),this.init(),e(null,this)):e(t)}var r=t("./parseCode"),a=t("./extend"),o=t("./projections"),s=t("./deriveConstants");i.projections=o,i.projections.start(),e.exports=i},{"./deriveConstants":33,"./extend":34,"./parseCode":37,"./projections":39}],3:[function(t,e,n){e.exports=function(t,e,n){var i,r,a,o=n.x,s=n.y,h=n.z||0;for(a=0;3>a;a++)if(!e||2!==a||void 0!==n.z)switch(0===a?(i=o,r="x"):1===a?(i=s,r="y"):(i=h,r="z"),t.axis[a]){case"e":n[r]=i;break;case"w":n[r]=-i;break;case"n":n[r]=i;break;case"s":n[r]=-i;break;case"u":void 0!==n[r]&&(n.z=i);break;case"d":void 0!==n[r]&&(n.z=-i);break;default:return null}return n}},{}],4:[function(t,e,n){var i=Math.PI/2,r=t("./sign");e.exports=function(t){return Math.abs(t)<i?t:t-r(t)*Math.PI}},{"./sign":21}],5:[function(t,e,n){var i=2*Math.PI,r=3.14159265359,a=t("./sign");e.exports=function(t){return Math.abs(t)<=r?t:t-a(t)*i}},{"./sign":21}],6:[function(t,e,n){e.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],7:[function(t,e,n){e.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],8:[function(t,e,n){e.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],9:[function(t,e,n){e.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],10:[function(t,e,n){e.exports=function(t){return t*t*t*(35/3072)}},{}],11:[function(t,e,n){e.exports=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}},{}],12:[function(t,e,n){e.exports=function(t,e,n,i,r){var a,o;a=t/e;for(var s=0;15>s;s++)if(o=(t-(e*a-n*Math.sin(2*a)+i*Math.sin(4*a)-r*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*i*Math.cos(4*a)-6*r*Math.cos(6*a)),a+=o,Math.abs(o)<=1e-10)return a;return NaN}},{}],13:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return 0>e?-1*i:i;for(var r,a,o,s,h=Math.asin(.5*e),u=0;30>u;u++)if(a=Math.sin(h),o=Math.cos(h),s=t*a,r=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-a/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),h+=r,Math.abs(r)<=1e-10)return h;return NaN}},{}],14:[function(t,e,n){e.exports=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}},{}],15:[function(t,e,n){e.exports=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}},{}],16:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e){for(var n,r,a=.5*t,o=i-2*Math.atan(e),s=0;15>=s;s++)if(n=t*Math.sin(o),r=i-2*Math.atan(e*Math.pow((1-n)/(1+n),a))-o,o+=r,Math.abs(r)<=1e-10)return o;return-9999}},{}],17:[function(t,e,n){var i=1,r=.25,a=.046875,o=.01953125,s=.01068115234375,h=.75,u=.46875,l=.013020833333333334,c=.007120768229166667,f=.3645833333333333,m=.005696614583333333,p=.3076171875;e.exports=function(t){var e=[];e[0]=i-t*(r+t*(a+t*(o+t*s))),e[1]=t*(h-t*(a+t*(o+t*s)));var n=t*t;return e[2]=n*(u-t*(l+t*c)),n*=t,e[3]=n*(f-t*m),e[4]=n*t*p,e}},{}],18:[function(t,e,n){var i=t("./pj_mlfn"),r=1e-10,a=20;e.exports=function(t,e,n){for(var o=1/(1-e),s=t,h=a;h;--h){var u=Math.sin(s),l=1-e*u*u;if(l=(i(s,u,Math.cos(s),n)-t)*(l*Math.sqrt(l))*o,s-=l,Math.abs(l)<r)return s}return s}},{"./pj_mlfn":19}],19:[function(t,e,n){e.exports=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}},{}],20:[function(t,e,n){e.exports=function(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}},{}],21:[function(t,e,n){e.exports=function(t){return 0>t?-1:1}},{}],22:[function(t,e,n){e.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},{}],23:[function(t,e,n){e.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},{}],24:[function(t,e,n){var i=Math.PI/2;e.exports=function(t,e,n){var r=t*n,a=.5*t;return r=Math.pow((1-r)/(1+r),a),Math.tan(.5*(i-e))/r}},{}],25:[function(t,e,n){n.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},n.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},n.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},n.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},n.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},n.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},n.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},n.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},n.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},n.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},n.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},n.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},n.s_jtsk={towgs84:"589,76,480",
ellipse:"bessel",datumName:"S-JTSK (Ferro)"},n.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},n.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},n.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(t,e,n){n.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},n.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},n.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},n.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},n.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},n.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},n.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},n.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},n.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},n.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},n.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},n.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},n.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},n.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},n.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},n.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},n.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},n.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},n.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},n.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},n.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},n.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},n.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},n.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},n.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},n.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},n.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},n.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},n.hough={a:6378270,rf:297,ellipseName:"Hough"},n.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},n.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},n.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},n.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},n.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},n.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},n.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},n.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},n.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},n.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},n.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},n.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},n.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},n.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,e,n){n.greenwich=0,n.lisbon=-9.131906111111,n.paris=2.337229166667,n.bogota=-74.080916666667,n.madrid=-3.687938888889,n.rome=12.452333333333,n.bern=7.439583333333,n.jakarta=106.807719444444,n.ferro=-17.666666666667,n.brussels=4.367975,n.stockholm=18.058277777778,n.athens=23.7163375,n.oslo=10.722916666667},{}],28:[function(t,e,n){n.ft={to_meter:.3048},n["us-ft"]={to_meter:1200/3937}},{}],29:[function(t,e,n){function i(t,e,n){var i;return Array.isArray(n)?(i=s(t,e,n),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):s(t,e,n)}function r(t){return t instanceof o?t:t.oProj?t.oProj:o(t)}function a(t,e,n){t=r(t);var a,o=!1;return"undefined"==typeof e?(e=t,t=h,o=!0):("undefined"!=typeof e.x||Array.isArray(e))&&(n=e,e=t,t=h,o=!0),e=r(e),n?i(t,e,n):(a={forward:function(n){return i(t,e,n)},inverse:function(n){return i(e,t,n)}},o&&(a.oProj=e),a)}var o=t("./Proj"),s=t("./transform"),h=o("WGS84");e.exports=a},{"./Proj":2,"./transform":65}],30:[function(t,e,n){var i=Math.PI/2,r=1,a=2,o=3,s=4,h=5,u=484813681109536e-20,l=1.0026,c=.3826834323650898,f=function(t){return this instanceof f?(this.datum_type=s,void(t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=h),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),(0!==this.datum_params[0]||0!==this.datum_params[1]||0!==this.datum_params[2])&&(this.datum_type=r),this.datum_params.length>3&&(0!==this.datum_params[3]||0!==this.datum_params[4]||0!==this.datum_params[5]||0!==this.datum_params[6])&&(this.datum_type=a,this.datum_params[3]*=u,this.datum_params[4]*=u,this.datum_params[5]*=u,this.datum_params[6]=this.datum_params[6]/1e6+1)),this.datum_type=t.grids?o:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_type===o&&(this.grids=t.grids)))):new f(t)};f.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(this.datum_type===r?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:this.datum_type===a?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:this.datum_type!==o&&t.datum_type!==o||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var e,n,r,a,o,s,h,u=t.x,l=t.y,c=t.z?t.z:0,f=0;if(-i>l&&l>-1.001*i)l=-i;else if(l>i&&1.001*i>l)l=i;else if(-i>l||l>i)return null;return u>Math.PI&&(u-=2*Math.PI),o=Math.sin(l),h=Math.cos(l),s=o*o,a=this.a/Math.sqrt(1-this.es*s),e=(a+c)*h*Math.cos(u),n=(a+c)*h*Math.sin(u),r=(a*(1-this.es)+c)*o,t.x=e,t.y=n,t.z=r,f},geocentric_to_geodetic:function(t){var e,n,r,a,o,s,h,u,l,c,f,m,p,M,y,d,_,v=1e-12,b=v*v,g=30,x=t.x,E=t.y,w=t.z?t.z:0;if(p=!1,e=Math.sqrt(x*x+E*E),n=Math.sqrt(x*x+E*E+w*w),e/this.a<v){if(p=!0,y=0,n/this.a<v)return d=i,void(_=-this.b)}else y=Math.atan2(E,x);r=w/n,a=e/n,o=1/Math.sqrt(1-this.es*(2-this.es)*a*a),u=a*(1-this.es)*o,l=r*o,M=0;do M++,h=this.a/Math.sqrt(1-this.es*l*l),_=e*u+w*l-h*(1-this.es*l*l),s=this.es*h/(h+_),o=1/Math.sqrt(1-s*(2-s)*a*a),c=a*(1-s)*o,f=r*o,m=f*u-c*l,u=c,l=f;while(m*m>b&&g>M);return d=Math.atan(f/Math.abs(c)),t.x=y,t.y=d,t.z=_,t},geocentric_to_geodetic_noniter:function(t){var e,n,r,a,o,s,h,u,f,m,p,M,y,d,_,v,b,g=t.x,x=t.y,E=t.z?t.z:0;if(g=parseFloat(g),x=parseFloat(x),E=parseFloat(E),b=!1,0!==g)e=Math.atan2(x,g);else if(x>0)e=i;else if(0>x)e=-i;else if(b=!0,e=0,E>0)n=i;else{if(!(0>E))return n=i,void(r=-this.b);n=-i}return o=g*g+x*x,a=Math.sqrt(o),s=E*l,u=Math.sqrt(s*s+o),m=s/u,M=a/u,p=m*m*m,h=E+this.b*this.ep2*p,v=a-this.a*this.es*M*M*M,f=Math.sqrt(h*h+v*v),y=h/f,d=v/f,_=this.a/Math.sqrt(1-this.es*y*y),r=d>=c?a/d-_:-c>=d?a/-d-_:E/y+_*(this.es-1),b===!1&&(n=Math.atan(y/d)),t.x=e,t.y=n,t.z=r,t},geocentric_to_wgs84:function(t){if(this.datum_type===r)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type===a){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],o=this.datum_params[3],s=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=u*(t.x-h*t.y+s*t.z)+e,c=u*(h*t.x+t.y-o*t.z)+n,f=u*(-s*t.x+o*t.y+t.z)+i;t.x=l,t.y=c,t.z=f}},geocentric_from_wgs84:function(t){if(this.datum_type===r)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type===a){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],o=this.datum_params[3],s=this.datum_params[4],h=this.datum_params[5],u=this.datum_params[6],l=(t.x-e)/u,c=(t.y-n)/u,f=(t.z-i)/u;t.x=l+h*c-s*f,t.y=-h*l+c+o*f,t.z=s*l-o*c+f}}},e.exports=f},{}],31:[function(t,e,n){var i=1,r=2,a=3,o=5,s=6378137,h=.006694379990141316;e.exports=function(t,e,n){function u(t){return t===i||t===r}var l,c,f;if(t.compare_datums(e))return n;if(t.datum_type===o||e.datum_type===o)return n;var m=t.a,p=t.es,M=e.a,y=e.es,d=t.datum_type;if(d===a)if(0===this.apply_gridshift(t,0,n))t.a=s,t.es=h;else{if(!t.datum_params)return t.a=m,t.es=t.es,n;for(l=1,c=0,f=t.datum_params.length;f>c;c++)l*=t.datum_params[c];if(0===l)return t.a=m,t.es=t.es,n;d=t.datum_params.length>3?r:i}return e.datum_type===a&&(e.a=s,e.es=h),(t.es!==e.es||t.a!==e.a||u(d)||u(e.datum_type))&&(t.geodetic_to_geocentric(n),u(t.datum_type)&&t.geocentric_to_wgs84(n),u(e.datum_type)&&e.geocentric_from_wgs84(n),e.geocentric_to_geodetic(n)),e.datum_type===a&&this.apply_gridshift(e,1,n),t.a=m,t.es=p,e.a=M,e.es=y,n}},{}],32:[function(t,e,n){function i(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?i[t]=a(arguments[1]):i[t]=o(arguments[1]):i[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?i.apply(e,t):i(t)});if("string"==typeof t){if(t in i)return i[t]}else"EPSG"in t?i["EPSG:"+t.EPSG]=t:"ESRI"in t?i["ESRI:"+t.ESRI]=t:"IAU2000"in t?i["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var r=t("./global"),a=t("./projString"),o=t("./wkt");r(i),e.exports=i},{"./global":35,"./projString":38,"./wkt":66}],33:[function(t,e,n){var i=t("./constants/Datum"),r=t("./constants/Ellipsoid"),a=t("./extend"),o=t("./datum"),s=1e-10,h=.16666666666666666,u=.04722222222222222,l=.022156084656084655;e.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=i[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var n=r[t.ellps]?r[t.ellps]:r.WGS84;a(t,n)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<s)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(h+t.es*(u+t.es*l)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=o(t)),t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":30,"./extend":34}],34:[function(t,e,n){e.exports=function(t,e){t=t||{};var n,i;if(!e)return t;for(i in e)n=e[i],void 0!==n&&(t[i]=n);return t}},{}],35:[function(t,e,n){e.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],36:[function(t,e,n){var i=t("./core");i.defaultDatum="WGS84",i.Proj=t("./Proj"),i.WGS84=new i.Proj("WGS84"),i.Point=t("./Point"),i.toPoint=t("./common/toPoint"),i.defs=t("./defs"),i.transform=t("./transform"),i.mgrs=t("mgrs"),i.version=t("../package.json").version,t("./includedProjections")(i),e.exports=i},{"../package.json":68,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":29,"./defs":32,"./includedProjections":"hTEDpn","./transform":65,mgrs:67}],37:[function(t,e,n){function i(t){return"string"==typeof t}function r(t){return t in h}function a(t){var e=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return e.reduce(function(e,n){return e+1+t.indexOf(n)},0)}function o(t){return"+"===t[0]}function s(t){return i(t)?r(t)?h[t]:a(t)?u(t):o(t)?l(t):void 0:t}var h=t("./defs"),u=t("./wkt"),l=t("./projString");e.exports=s},{"./defs":32,"./projString":38,"./wkt":66}],38:[function(t,e,n){var i=.017453292519943295,r=t("./constants/PrimeMeridian"),a=t("./constants/units");e.exports=function(t){var e={},n={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),n[e[0].toLowerCase()]=e[1]});var o,s,h,u={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*i},lat_1:function(t){e.lat1=t*i},lat_2:function(t){e.lat2=t*i},lat_ts:function(t){e.lat_ts=t*i},lon_0:function(t){e.long0=t*i},lon_1:function(t){e.long1=t*i},lon_2:function(t){e.long2=t*i},alpha:function(t){e.alpha=parseFloat(t)*i},lonc:function(t){e.longc=t*i},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t,a[t]&&(e.to_meter=a[t].to_meter)},from_greenwich:function(t){e.from_greenwich=t*i},pm:function(t){e.from_greenwich=(r[t]?r[t]:parseFloat(t))*i},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var n="ewnsud";3===t.length&&-1!==n.indexOf(t.substr(0,1))&&-1!==n.indexOf(t.substr(1,1))&&-1!==n.indexOf(t.substr(2,1))&&(e.axis=t)}};for(o in n)s=n[o],o in u?(h=u[o],"function"==typeof h?h(s):e[h]=s):e[o]=s;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e}},{"./constants/PrimeMeridian":27,"./constants/units":28}],39:[function(t,e,n){function i(t,e){var n=o.length;return t.names?(o[n]=t,t.names.forEach(function(t){a[t.toLowerCase()]=n}),this):(console.log(e),!0)}var r=[t("./projections/merc"),t("./projections/longlat")],a={},o=[];n.add=i,n.get=function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!=typeof a[e]&&o[a[e]]?o[a[e]]:void 0},n.start=function(){r.forEach(i)}},{"./projections/longlat":51,"./projections/merc":52}],40:[function(t,e,n){var i=1e-10,r=t("../common/msfnz"),a=t("../common/qsfnz"),o=t("../common/adjust_lon"),s=t("../common/asinz");n.init=function(){Math.abs(this.lat1+this.lat2)<i||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=r(this.e3,this.sin_po,this.cos_po),this.qs1=a(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=r(this.e3,this.sin_po,this.cos_po),this.qs2=a(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=a(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>i?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},n.forward=function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=a(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*o(e-this.long0),h=r*Math.sin(s)+this.x0,u=this.rh-r*Math.cos(s)+this.y0;return t.x=h,t.y=u,t},n.inverse=function(t){var e,n,i,r,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),a=o(r/this.ns0+this.long0),t.x=a,t.y=s,t},n.phi1z=function(t,e){var n,r,a,o,h,u=s(.5*e);if(i>t)return u;for(var l=t*t,c=1;25>=c;c++)if(n=Math.sin(u),r=Math.cos(u),a=t*n,o=1-a*a,h=.5*o*o/r*(e/(1-l)-n/o+.5/t*Math.log((1-a)/(1+a))),u+=h,Math.abs(h)<=1e-7)return u;return null},n.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],41:[function(t,e,n){var i=t("../common/adjust_lon"),r=Math.PI/2,a=1e-10,o=t("../common/mlfn"),s=t("../common/e0fn"),h=t("../common/e1fn"),u=t("../common/e2fn"),l=t("../common/e3fn"),c=t("../common/gN"),f=t("../common/asinz"),m=t("../common/imlfn");n.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},n.forward=function(t){var e,n,f,m,p,M,y,d,_,v,b,g,x,E,w,S,I,P,O,T,D,k,F,R=t.x,C=t.y,A=Math.sin(t.y),j=Math.cos(t.y),L=i(R-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=a?(t.x=this.x0+this.a*(r-C)*Math.sin(L),t.y=this.y0-this.a*(r-C)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=a?(t.x=this.x0+this.a*(r+C)*Math.sin(L),t.y=this.y0+this.a*(r+C)*Math.cos(L),t):(P=this.sin_p12*A+this.cos_p12*j*Math.cos(L),S=Math.acos(P),I=S/Math.sin(S),t.x=this.x0+this.a*I*j*Math.sin(L),t.y=this.y0+this.a*I*(this.cos_p12*A-this.sin_p12*j*Math.cos(L)),t):(e=s(this.es),n=h(this.es),f=u(this.es),m=l(this.es),Math.abs(this.sin_p12-1)<=a?(p=this.a*o(e,n,f,m,r),M=this.a*o(e,n,f,m,C),t.x=this.x0+(p-M)*Math.sin(L),t.y=this.y0-(p-M)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=a?(p=this.a*o(e,n,f,m,r),M=this.a*o(e,n,f,m,C),t.x=this.x0+(p+M)*Math.sin(L),t.y=this.y0+(p+M)*Math.cos(L),t):(y=A/j,d=c(this.a,this.e,this.sin_p12),_=c(this.a,this.e,A),v=Math.atan((1-this.es)*y+this.es*d*this.sin_p12/(_*j)),b=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(L)),O=0===b?Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(b)-Math.PI)<=a?-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.asin(Math.sin(L)*Math.cos(v)/Math.sin(b)),g=this.e*this.sin_p12/Math.sqrt(1-this.es),x=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),E=g*x,w=x*x,T=O*O,D=T*O,k=D*O,F=k*O,S=d*O*(1-T*w*(1-w)/6+D/8*E*(1-2*w)+k/120*(w*(4-7*w)-3*g*g*(1-7*w))-F/48*E),t.x=this.x0+S*Math.sin(b),t.y=this.y0+S*Math.cos(b),t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,p,M,y,d,_,v,b,g,x,E,w,S,I,P,O,T,D,k,F,R,C;if(this.sphere){if(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*r*this.a)return;return n=e/this.a,p=Math.sin(n),M=Math.cos(n),y=this.long0,Math.abs(e)<=a?d=this.lat0:(d=f(M*this.sin_p12+t.y*p*this.cos_p12/e),_=Math.abs(this.lat0)-r,y=i(Math.abs(_)<=a?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*p,e*this.cos_p12*M-t.y*this.sin_p12*p))),t.x=y,t.y=d,t}return v=s(this.es),b=h(this.es),g=u(this.es),x=l(this.es),Math.abs(this.sin_p12-1)<=a?(E=this.a*o(v,b,g,x,r),e=Math.sqrt(t.x*t.x+t.y*t.y),w=E-e,d=m(w/this.a,v,b,g,x),y=i(this.long0+Math.atan2(t.x,-1*t.y)),t.x=y,t.y=d,t):Math.abs(this.sin_p12+1)<=a?(E=this.a*o(v,b,g,x,r),e=Math.sqrt(t.x*t.x+t.y*t.y),w=e-E,d=m(w/this.a,v,b,g,x),y=i(this.long0+Math.atan2(t.x,t.y)),t.x=y,t.y=d,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),P=Math.atan2(t.x,t.y),S=c(this.a,this.e,this.sin_p12),O=Math.cos(P),T=this.e*this.cos_p12*O,D=-T*T/(1-this.es),k=3*this.es*(1-D)*this.sin_p12*this.cos_p12*O/(1-this.es),F=e/S,R=F-D*(1+D)*Math.pow(F,3)/6-k*(1+3*D)*Math.pow(F,4)/24,C=1-D*R*R/2-F*R*R*R/6,I=Math.asin(this.sin_p12*Math.cos(R)+this.cos_p12*Math.sin(R)*O),y=i(this.long0+Math.asin(Math.sin(P)*Math.sin(R)/Math.cos(I))),d=Math.atan((1-this.es*C*this.sin_p12/Math.sin(I))*Math.tan(I)/(1-this.es)),t.x=y,t.y=d,t)},n.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,e,n){var i=t("../common/mlfn"),r=t("../common/e0fn"),a=t("../common/e1fn"),o=t("../common/e2fn"),s=t("../common/e3fn"),h=t("../common/gN"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),f=Math.PI/2,m=1e-10;n.init=function(){this.sphere||(this.e0=r(this.es),this.e1=a(this.es),this.e2=o(this.es),this.e3=s(this.es),this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0))},n.forward=function(t){var e,n,r=t.x,a=t.y;if(r=u(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(a)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(a),Math.cos(r))-this.lat0);else{var o=Math.sin(a),s=Math.cos(a),l=h(this.a,this.e,o),c=Math.tan(a)*Math.tan(a),f=r*Math.cos(a),m=f*f,p=this.es*s*s/(1-this.es),M=this.a*i(this.e0,this.e1,this.e2,this.e3,a);e=l*f*(1-m*c*(1/6-(8-c+8*p)*m/120)),n=M-this.ml0+l*o/s*m*(.5+(5-c+6*p)*m/24)}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var a=r+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(a))}else{var o=this.ml0/this.a+r,s=c(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-f)<=m)return t.x=this.long0,t.y=f,0>r&&(t.y*=-1),t;var p=h(this.a,this.e,Math.sin(s)),M=p*p*p/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(s),2),d=i*this.a/p,_=d*d;e=s-p*Math.tan(s)/M*d*d*(.5-(1+3*y)*d*d/24),n=d*(1-_*(y/3+(1+3*y)*y*_/15))/Math.cos(s)}return t.x=u(n+this.long0),t.y=l(e),t},n.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],43:[function(t,e,n){var i=t("../common/adjust_lon"),r=t("../common/qsfnz"),a=t("../common/msfnz"),o=t("../common/iqsfnz");n.init=function(){this.sphere||(this.k0=a(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},n.forward=function(t){var e,n,a=t.x,o=t.y,s=i(a-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var h=r(this.e,Math.sin(o));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*h*.5/this.k0}return t.x=e,t.y=n,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=i(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=o(this.e,2*t.y*this.k0/this.a),e=i(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},n.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],44:[function(t,e,n){var i=t("../common/adjust_lon"),r=t("../common/adjust_lat");n.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},n.forward=function(t){var e=t.x,n=t.y,a=i(e-this.long0),o=r(n-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*o,t},n.inverse=function(t){var e=t.x,n=t.y;return t.x=i(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=r(this.lat0+(n-this.y0)/this.a),t},n.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],45:[function(t,e,n){var i=t("../common/e0fn"),r=t("../common/e1fn"),a=t("../common/e2fn"),o=t("../common/e3fn"),s=t("../common/msfnz"),h=t("../common/mlfn"),u=t("../common/adjust_lon"),l=t("../common/adjust_lat"),c=t("../common/imlfn"),f=1e-10;n.init=function(){Math.abs(this.lat1+this.lat2)<f||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=r(this.es),this.e2=a(this.es),this.e3=o(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=s(this.e,this.sinphi,this.cosphi),this.ml1=h(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<f?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=s(this.e,this.sinphi,this.cosphi),this.ml2=h(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=h(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},n.forward=function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=h(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var a=this.ns*u(n-this.long0),o=this.x0+e*Math.sin(a),s=this.y0+this.rh-e*Math.cos(a);return t.x=o,t.y=s,t},n.inverse=function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,i,r;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;if(0!==n&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=u(this.long0+a/this.ns),i=l(this.g-n/this.a),t.x=r,t.y=i,t;var o=this.g-n/this.a;return i=c(o,this.e0,this.e1,this.e2,this.e3),r=u(this.long0+a/this.ns),t.x=r,t.y=i,t},n.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],46:[function(t,e,n){var i=Math.PI/4,r=t("../common/srat"),a=Math.PI/2,o=20;n.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*r(this.e*t,this.ratexp))},n.forward=function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i),this.C)*r(this.e*Math.sin(n),this.ratexp))-a,t.x=this.C*e,t},n.inverse=function(t){for(var e=1e-14,n=t.x/this.C,s=t.y,h=Math.pow(Math.tan(.5*s+i)/this.K,1/this.C),u=o;u>0&&(s=2*Math.atan(h*r(this.e*Math.sin(t.y),-.5*this.e))-a,!(Math.abs(s-t.y)<e));--u)t.y=s;return u?(t.x=n,t.y=s,t):null},n.names=["gauss"]},{"../common/srat":22}],47:[function(t,e,n){var i=t("../common/adjust_lon"),r=1e-10,a=t("../common/asinz");n.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},n.forward=function(t){var e,n,a,o,s,h,u,l,c=t.x,f=t.y;return a=i(c-this.long0),e=Math.sin(f),n=Math.cos(f),o=Math.cos(a),h=this.sin_p14*e+this.cos_p14*n*o,s=1,h>0||Math.abs(h)<=r?(u=this.x0+this.a*s*n*Math.sin(a)/h,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*o)/h):(u=this.x0+this.infinity_dist*n*Math.sin(a),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*o)),t.x=u,t.y=l,t},n.inverse=function(t){var e,n,r,o,s,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),n=Math.sin(o),r=Math.cos(o),h=a(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=i(this.long0+s)):(h=this.phic0,s=0),t.x=s,t.y=h,t},n.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],48:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},n.forward=function(t){var e,n,r,a,o,s,h,u=t.x,l=t.y,c=i(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(a)),s=this.n*o,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),t.y=h*Math.cos(s)/1,t.x=h*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},n.inverse=function(t){var e,n,i,r,a,o,s,h,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x),r=a/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,h=0;var l=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(h=1),s=t.y,l+=1;while(0===h&&15>l);return l>=15?null:t},n.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],49:[function(t,e,n){var i=Math.PI/2,r=Math.PI/4,a=1e-10,o=t("../common/qsfnz"),s=t("../common/adjust_lon");n.S_POLE=1,n.N_POLE=2,n.EQUIT=3,n.OBLIQ=4,n.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-i)<a?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<a?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=o(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=o(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},n.forward=function(t){var e,n,h,u,l,c,f,m,p,M,y=t.x,d=t.y;if(y=s(y-this.long0),this.sphere){if(l=Math.sin(d),M=Math.cos(d),h=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+M*h:1+this.sinph0*l+this.cosph0*M*h,a>=n)return null;n=Math.sqrt(2/n),e=n*M*Math.sin(y),n*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*M*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(d+this.phi0)<a)return null;n=r-.5*d,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(y),n*=h}}else{switch(f=0,m=0,p=0,h=Math.cos(y),u=Math.sin(y),l=Math.sin(d),c=o(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=c/this.qp,m=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:p=1+this.sinb1*f+this.cosb1*m*h;break;case this.EQUIT:p=1+m*h;break;case this.N_POLE:p=i+d,c=this.qp-c;break;case this.S_POLE:p=d-i,c=this.qp+c}if(Math.abs(p)<a)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),n=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*f-this.sinb1*m*h):(p=Math.sqrt(2/(1+m*h)))*f*this.ymf,e=this.xmf*p*m*u;break;case this.N_POLE:case this.S_POLE:c>=0?(e=(p=Math.sqrt(c))*u,n=h*(this.mode===this.S_POLE?p:-p)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,o,h,u,l,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var m,p=0,M=0;if(m=Math.sqrt(c*c+f*f),n=.5*m,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(M=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(m)<=a?0:Math.asin(f*M/m),c*=M,f=p*m;break;case this.OBLIQ:n=Math.abs(m)<=a?this.phi0:Math.asin(p*this.sinph0+f*M*this.cosph0/m),c*=M*this.cosph0,f=(p-Math.sin(n)*this.sinph0)*m;break;case this.N_POLE:f=-f,n=i-n;break;case this.S_POLE:n-=i}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,u=Math.sqrt(c*c+f*f),a>u)return t.x=0,t.y=this.phi0,t;o=2*Math.asin(.5*u/this.rq),r=Math.cos(o),c*=o=Math.sin(o),this.mode===this.OBLIQ?(l=r*this.sinb1+f*o*this.cosb1/u,h=this.qp*l,f=u*this.cosb1*r-f*this.sinb1*o):(l=f*o/u,h=this.qp*l,f=u*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),h=c*c+f*f,!h)return t.x=0,t.y=this.phi0,t;l=1-h/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(c,f),n=this.authlat(Math.asin(l),this.apa)}return t.x=s(this.long0+e),t.y=n,t},n.P00=.3333333333333333,
n.P01=.17222222222222222,n.P02=.10257936507936508,n.P10=.06388888888888888,n.P11=.0664021164021164,n.P20=.016415012942191543,n.authset=function(t){var e,n=[];return n[0]=t*this.P00,e=t*t,n[0]+=e*this.P01,n[1]=e*this.P10,e*=t,n[0]+=e*this.P02,n[1]+=e*this.P11,n[2]=e*this.P20,n},n.authlat=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)},n.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],50:[function(t,e,n){var i=1e-10,r=t("../common/msfnz"),a=t("../common/tsfnz"),o=Math.PI/2,s=t("../common/sign"),h=t("../common/adjust_lon"),u=t("../common/phi2z");n.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<i)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=r(this.e,e,n),s=a(this.e,this.lat1,e),h=Math.sin(this.lat2),u=Math.cos(this.lat2),l=r(this.e,h,u),c=a(this.e,this.lat2,h),f=a(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>i?this.ns=Math.log(o/l)/Math.log(s/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},n.forward=function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=i&&(n=s(n)*(o-2*i));var r,u,l=Math.abs(Math.abs(n)-o);if(l>i)r=a(this.e,n,Math.sin(n)),u=this.a*this.f0*Math.pow(r,this.ns);else{if(l=n*this.ns,0>=l)return null;u=0}var c=this.ns*h(e-this.long0);return t.x=this.k0*(u*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,t},n.inverse=function(t){var e,n,i,r,a,s=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+l*l),n=1):(e=-Math.sqrt(s*s+l*l),n=-1);var c=0;if(0!==e&&(c=Math.atan2(n*s,n*l)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),r=u(this.e,i),-9999===r)return null}else r=-o;return a=h(c/this.ns+this.long0),t.x=a,t.y=r,t},n.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],51:[function(t,e,n){function i(t){return t}n.init=function(){},n.forward=i,n.inverse=i,n.names=["longlat","identity"]},{}],52:[function(t,e,n){var i=t("../common/msfnz"),r=Math.PI/2,a=1e-10,o=57.29577951308232,s=t("../common/adjust_lon"),h=Math.PI/4,u=t("../common/tsfnz"),l=t("../common/phi2z");n.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},n.forward=function(t){var e=t.x,n=t.y;if(n*o>90&&-90>n*o&&e*o>180&&-180>e*o)return null;var i,l;if(Math.abs(Math.abs(n)-r)<=a)return null;if(this.sphere)i=this.x0+this.a*this.k0*s(e-this.long0),l=this.y0+this.a*this.k0*Math.log(Math.tan(h+.5*n));else{var c=Math.sin(n),f=u(this.e,n,c);i=this.x0+this.a*this.k0*s(e-this.long0),l=this.y0-this.a*this.k0*Math.log(f)}return t.x=i,t.y=l,t},n.inverse=function(t){var e,n,i=t.x-this.x0,a=t.y-this.y0;if(this.sphere)n=r-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var o=Math.exp(-a/(this.a*this.k0));if(n=l(this.e,o),-9999===n)return null}return e=s(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},n.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],53:[function(t,e,n){var i=t("../common/adjust_lon");n.init=function(){},n.forward=function(t){var e=t.x,n=t.y,r=i(e-this.long0),a=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=a,t.y=o,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=i(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},n.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],54:[function(t,e,n){var i=t("../common/adjust_lon"),r=1e-10;n.init=function(){},n.forward=function(t){for(var e=t.x,n=t.y,a=i(e-this.long0),o=n,s=Math.PI*Math.sin(n),h=0;!0;h++){var u=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=u,Math.abs(u)<r)break}o/=2,Math.PI/2-Math.abs(n)<r&&(a=0);var l=.900316316158*this.a*a*Math.cos(o)+this.x0,c=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=l,t.y=c,t},n.inverse=function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=i(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var a=Math.asin(n);return t.x=r,t.y=a,t},n.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],55:[function(t,e,n){var i=484813681109536e-20;n.iterations=1,n.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},n.forward=function(t){var e,n=t.x,r=t.y,a=r-this.lat0,o=n-this.long0,s=a/i*1e-5,h=o,u=1,l=0;for(e=1;10>=e;e++)u*=s,l+=this.A[e]*u;var c,f,m=l,p=h,M=1,y=0,d=0,_=0;for(e=1;6>=e;e++)c=M*m-y*p,f=y*m+M*p,M=c,y=f,d=d+this.B_re[e]*M-this.B_im[e]*y,_=_+this.B_im[e]*M+this.B_re[e]*y;return t.x=_*this.a+this.x0,t.y=d*this.a+this.y0,t},n.inverse=function(t){var e,n,r,a=t.x,o=t.y,s=a-this.x0,h=o-this.y0,u=h/this.a,l=s/this.a,c=1,f=0,m=0,p=0;for(e=1;6>=e;e++)n=c*u-f*l,r=f*u+c*l,c=n,f=r,m=m+this.C_re[e]*c-this.C_im[e]*f,p=p+this.C_im[e]*c+this.C_re[e]*f;for(var M=0;M<this.iterations;M++){var y,d,_=m,v=p,b=u,g=l;for(e=2;6>=e;e++)y=_*m-v*p,d=v*m+_*p,_=y,v=d,b+=(e-1)*(this.B_re[e]*_-this.B_im[e]*v),g+=(e-1)*(this.B_im[e]*_+this.B_re[e]*v);_=1,v=0;var x=this.B_re[1],E=this.B_im[1];for(e=2;6>=e;e++)y=_*m-v*p,d=v*m+_*p,_=y,v=d,x+=e*(this.B_re[e]*_-this.B_im[e]*v),E+=e*(this.B_im[e]*_+this.B_re[e]*v);var w=x*x+E*E;m=(b*x+g*E)/w,p=(g*x-b*E)/w}var S=m,I=p,P=1,O=0;for(e=1;9>=e;e++)P*=S,O+=this.D[e]*P;var T=this.lat0+O*i*1e5,D=this.long0+I;return t.x=D,t.y=T,t},n.names=["New_Zealand_Map_Grid","nzmg"]},{}],56:[function(t,e,n){var i=t("../common/tsfnz"),r=t("../common/adjust_lon"),a=t("../common/phi2z"),o=Math.PI/2,s=Math.PI/4,h=1e-10;n.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var a=i(this.e,this.lat0,t),o=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));1>o*o&&(o=1);var s,h;if(isNaN(this.longc)){var u=i(this.e,this.lat1,Math.sin(this.lat1)),l=i(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(o+Math.sqrt(o*o-1))*Math.pow(a,this.bl):this.el=(o-Math.sqrt(o*o-1))*Math.pow(a,this.bl);var c=Math.pow(u,this.bl),f=Math.pow(l,this.bl);s=this.el/c,h=.5*(s-1/s);var m=(this.el*this.el-f*c)/(this.el*this.el+f*c),p=(f-c)/(f+c),M=r(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(m*Math.tan(.5*this.bl*M)/p)/this.bl,this.long0=r(this.long0);var y=r(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/h),this.alpha=Math.asin(o*Math.sin(this.gamma0))}else s=this.lat0>=0?o+Math.sqrt(o*o-1):o-Math.sqrt(o*o-1),this.el=s*Math.pow(a,this.bl),h=.5*(s-1/s),this.gamma0=Math.asin(Math.sin(this.alpha)/o),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha))},n.forward=function(t){var e,n,a,u=t.x,l=t.y,c=r(u-this.long0);if(Math.abs(Math.abs(l)-o)<=h)a=l>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(s+a*this.gamma0*.5)),e=-1*a*o*this.al/this.bl;else{var f=i(this.e,l,Math.sin(l)),m=this.el/Math.pow(f,this.bl),p=.5*(m-1/m),M=.5*(m+1/m),y=Math.sin(this.bl*c),d=(p*Math.sin(this.gamma0)-y*Math.cos(this.gamma0))/M;n=Math.abs(Math.abs(d)-1)<=h?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-d)/(1+d))/this.bl,e=Math.abs(Math.cos(this.bl*c))<=h?this.al*this.bl*c:this.al*Math.atan2(p*Math.cos(this.gamma0)+y*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},n.inverse=function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),s=.5*(i-1/i),u=.5*(i+1/i),l=Math.sin(this.bl*e/this.al),c=(l*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/u,f=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<h?(t.x=this.long0,t.y=o):Math.abs(c+1)<h?(t.x=this.long0,t.y=-1*o):(t.y=a(this.e,f),t.x=r(this.long0-Math.atan2(s*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},n.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],57:[function(t,e,n){var i=t("../common/e0fn"),r=t("../common/e1fn"),a=t("../common/e2fn"),o=t("../common/e3fn"),s=t("../common/adjust_lon"),h=t("../common/adjust_lat"),u=t("../common/mlfn"),l=1e-10,c=t("../common/gN"),f=20;n.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=r(this.es),this.e2=a(this.es),this.e3=o(this.es),this.ml0=this.a*u(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,r=t.x,a=t.y,o=s(r-this.long0);if(i=o*Math.sin(a),this.sphere)Math.abs(a)<=l?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(a),n=this.a*(h(a-this.lat0)+(1-Math.cos(i))/Math.tan(a)));else if(Math.abs(a)<=l)e=this.a*o,n=-1*this.ml0;else{var f=c(this.a,this.e,Math.sin(a))/Math.tan(a);e=f*Math.sin(i),n=this.a*u(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+f*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){var e,n,i,r,a,o,h,c,m;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=l)e=s(i/this.a+this.long0),n=0;else{o=this.lat0+r/this.a,h=i*i/this.a/this.a+o*o,c=o;var p;for(a=f;a;--a)if(p=Math.tan(c),m=-1*(o*(c*p+1)-c-.5*(c*c+h)*p)/((c-o)/p-1),c+=m,Math.abs(m)<=l){n=c;break}e=s(this.long0+Math.asin(i*Math.tan(c)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=l)n=0,e=s(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,h=i*i/this.a/this.a+o*o,c=o;var M,y,d,_,v;for(a=f;a;--a)if(v=this.e*Math.sin(c),M=Math.sqrt(1-v*v)*Math.tan(c),y=this.a*u(this.e0,this.e1,this.e2,this.e3,c),d=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),_=y/this.a,m=(o*(M*_+1)-_-.5*M*(_*_+h))/(this.es*Math.sin(2*c)*(_*_+h-2*o*_)/(4*M)+(o-_)*(M*d-2/Math.sin(2*c))-d),c-=m,Math.abs(m)<=l){n=c;break}M=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=s(this.long0+Math.asin(i*M/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},n.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],58:[function(t,e,n){var i=t("../common/adjust_lon"),r=t("../common/adjust_lat"),a=t("../common/pj_enfn"),o=20,s=t("../common/pj_mlfn"),h=t("../common/pj_inv_mlfn"),u=Math.PI/2,l=1e-10,c=t("../common/asinz");n.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=a(this.es)},n.forward=function(t){var e,n,r=t.x,a=t.y;if(r=i(r-this.long0),this.sphere){if(this.m)for(var h=this.n*Math.sin(a),u=o;u;--u){var c=(this.m*a+Math.sin(a)-h)/(this.m+Math.cos(a));if(a-=c,Math.abs(c)<l)break}else a=1!==this.n?Math.asin(this.n*Math.sin(a)):a;e=this.a*this.C_x*r*(this.m+Math.cos(a)),n=this.a*this.C_y*a}else{var f=Math.sin(a),m=Math.cos(a);n=this.a*s(a,f,m,this.en),e=this.a*r*m/Math.sqrt(1-this.es*f*f)}return t.x=e,t.y=n,t},n.inverse=function(t){var e,n,a,o;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a/=this.C_x*(this.m+Math.cos(e)),this.m?e=c((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=c(Math.sin(e)/this.n)),a=i(a+this.long0),e=r(e)):(e=h(t.y/this.a,this.es,this.en),o=Math.abs(e),u>o?(o=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(e)),a=i(n)):u>o-l&&(a=this.long0)),t.x=a,t.y=e,t},n.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],59:[function(t,e,n){n.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=this.rf,r=1/i,a=2*r-Math.pow(r,2),o=this.e=Math.sqrt(a);this.R=this.k0*n*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*h+this.alpha*o/2*u},n.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*o+this.x0,t},n.inverse=function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),s=this.lambda0+o/this.alpha,h=0,u=a,l=-1e3,c=0;Math.abs(u-l)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),l=u,u=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=s,t.y=u,t},n.names=["somerc"]},{}],60:[function(t,e,n){var i=Math.PI/2,r=1e-10,a=t("../common/sign"),o=t("../common/msfnz"),s=t("../common/tsfnz"),h=t("../common/phi2z"),u=t("../common/adjust_lon");n.ssfn_=function(t,e,n){return e*=n,Math.tan(.5*(i+t))*Math.pow((1-e)/(1+e),.5*n)},n.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r&&(this.k0=.5*(1+a(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r&&(this.k0=.5*this.cons*o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/s(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=o(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},n.forward=function(t){var e,n,a,o,h,l,c=t.x,f=t.y,m=Math.sin(f),p=Math.cos(f),M=u(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=r&&Math.abs(f+this.lat0)<=r?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*m+this.coslat0*p*Math.cos(M)),t.x=this.a*e*p*Math.sin(M)+this.x0,t.y=this.a*e*(this.coslat0*m-this.sinlat0*p*Math.cos(M))+this.y0,t):(n=2*Math.atan(this.ssfn_(f,m,this.e))-i,o=Math.cos(n),a=Math.sin(n),Math.abs(this.coslat0)<=r?(h=s(this.e,f*this.con,this.con*m),l=2*this.a*this.k0*h/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<r?(e=2*this.a*this.k0/(1+o*Math.cos(M)),t.y=e*a):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*o*Math.cos(M))),t.y=e*(this.cosX0*a-this.sinX0*o*Math.cos(M))+this.y0),t.x=e*o*Math.sin(M)+this.x0,t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,o,s,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,r>=l?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),e=u(Math.abs(this.coslat0)<r?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=r){if(r>=l)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,a=l*this.cons/(2*this.a*this.k0),n=this.con*h(this.e,a),e=this.con*u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r>=l?s=this.X0:(s=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/l),e=u(this.long0+Math.atan2(t.x*Math.sin(o),l*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*h(this.e,Math.tan(.5*(i+s)));return t.x=e,t.y=n,t},n.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],61:[function(t,e,n){var i=t("./gauss"),r=t("../common/adjust_lon");n.init=function(){i.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},n.forward=function(t){var e,n,a,o;return t.x=r(t.x-this.long0),i.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*a),t.x=o*n*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*n*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},n.inverse=function(t){var e,n,a,o,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var h=2*Math.atan2(s,this.R2);e=Math.sin(h),n=Math.cos(h),o=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),a=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else o=this.phic0,a=0;return t.x=a,t.y=o,i.inverse.apply(this,[t]),t.x=r(t.x+this.long0),t},n.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":46}],62:[function(t,e,n){var i=t("../common/e0fn"),r=t("../common/e1fn"),a=t("../common/e2fn"),o=t("../common/e3fn"),s=t("../common/mlfn"),h=t("../common/adjust_lon"),u=Math.PI/2,l=1e-10,c=t("../common/sign"),f=t("../common/asinz");n.init=function(){this.e0=i(this.es),this.e1=r(this.es),this.e2=a(this.es),this.e3=o(this.es),this.ml0=this.a*s(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,i,r=t.x,a=t.y,o=h(r-this.long0),u=Math.sin(a),l=Math.cos(a);if(this.sphere){var c=l*Math.sin(o);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;n=.5*this.a*this.k0*Math.log((1+c)/(1-c)),e=Math.acos(l*Math.cos(o)/Math.sqrt(1-c*c)),0>a&&(e=-e),i=this.a*this.k0*(e-this.lat0)}else{var f=l*o,m=Math.pow(f,2),p=this.ep2*Math.pow(l,2),M=Math.tan(a),y=Math.pow(M,2);e=1-this.es*Math.pow(u,2);var d=this.a/Math.sqrt(e),_=this.a*s(this.e0,this.e1,this.e2,this.e3,a);n=this.k0*d*f*(1+m/6*(1-y+p+m/20*(5-18*y+Math.pow(y,2)+72*p-58*this.ep2)))+this.x0,i=this.k0*(_-this.ml0+d*M*(m*(.5+m/24*(5-y+9*p+4*Math.pow(p,2)+m/30*(61-58*y+Math.pow(y,2)+600*p-330*this.ep2)))))+this.y0}return t.x=n,t.y=i,t},n.inverse=function(t){var e,n,i,r,a,o,s=6;if(this.sphere){var m=Math.exp(t.x/(this.a*this.k0)),p=.5*(m-1/m),M=this.lat0+t.y/(this.a*this.k0),y=Math.cos(M);e=Math.sqrt((1-y*y)/(1+p*p)),a=f(e),0>M&&(a=-a),o=0===p&&0===y?this.long0:h(Math.atan2(p,y)+this.long0)}else{var d=t.x-this.x0,_=t.y-this.y0;for(e=(this.ml0+_/this.k0)/this.a,n=e,r=0;i=(e+this.e1*Math.sin(2*n)-this.e2*Math.sin(4*n)+this.e3*Math.sin(6*n))/this.e0-n,n+=i,!(Math.abs(i)<=l);r++)if(r>=s)return 95;if(Math.abs(n)<u){var v=Math.sin(n),b=Math.cos(n),g=Math.tan(n),x=this.ep2*Math.pow(b,2),E=Math.pow(x,2),w=Math.pow(g,2),S=Math.pow(w,2);e=1-this.es*Math.pow(v,2);var I=this.a/Math.sqrt(e),P=I*(1-this.es)/e,O=d/(I*this.k0),T=Math.pow(O,2);a=n-I*g*T/P*(.5-T/24*(5+3*w+10*x-4*E-9*this.ep2-T/30*(61+90*w+298*x+45*S-252*this.ep2-3*E))),o=h(this.long0+O*(1-T/6*(1+2*w+x-T/20*(5-2*x+28*w-3*E+8*this.ep2+24*S)))/b)}else a=u*c(_),o=this.long0}return t.x=o,t.y=a,t},n.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],63:[function(t,e,n){var i=.017453292519943295,r=t("./tmerc");n.dependsOn="tmerc",n.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*i,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,r.init.apply(this),this.forward=r.forward,this.inverse=r.inverse)},n.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":62}],64:[function(t,e,n){var i=t("../common/adjust_lon"),r=Math.PI/2,a=1e-10,o=t("../common/asinz");n.init=function(){this.R=this.a},n.forward=function(t){var e,n,s=t.x,h=t.y,u=i(s-this.long0);Math.abs(h)<=a&&(e=this.x0+this.R*u,n=this.y0);var l=o(2*Math.abs(h/Math.PI));(Math.abs(u)<=a||Math.abs(Math.abs(h)-r)<=a)&&(e=this.x0,n=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/u-u/Math.PI),f=c*c,m=Math.sin(l),p=Math.cos(l),M=p/(m+p-1),y=M*M,d=M*(2/m-1),_=d*d,v=Math.PI*this.R*(c*(M-_)+Math.sqrt(f*(M-_)*(M-_)-(_+f)*(y-_)))/(_+f);0>u&&(v=-v),e=this.x0+v;var b=f+M;return v=Math.PI*this.R*(d*b-c*Math.sqrt((_+f)*(f+1)-b*b))/(_+f),n=h>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t},n.inverse=function(t){var e,n,r,o,s,h,u,l,c,f,m,p,M;return t.x-=this.x0,t.y-=this.y0,m=Math.PI*this.R,r=t.x/m,o=t.y/m,s=r*r+o*o,h=-Math.abs(o)*(1+s),u=h-2*o*o+r*r,l=-2*h+1+2*o*o+s*s,M=o*o/l+(2*u*u*u/l/l/l-9*h*u/l/l)/27,c=(h-u*u/3/l)/l,f=2*Math.sqrt(-c/3),m=3*M/c/f,Math.abs(m)>1&&(m=m>=0?1:-1),p=Math.acos(m)/3,n=t.y>=0?(-f*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI:-(-f*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI,e=Math.abs(r)<a?this.long0:i(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-o*o)+s*s))/2/r),t.x=e,t.y=n,t},n.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],65:[function(t,e,n){var i=.017453292519943295,r=57.29577951308232,a=1,o=2,s=t("./datum_transform"),h=t("./adjust_axis"),u=t("./Proj"),l=t("./common/toPoint");e.exports=function c(t,e,n){function f(t,e){return(t.datum.datum_type===a||t.datum.datum_type===o)&&"WGS84"!==e.datumCode}var m;return Array.isArray(n)&&(n=l(n)),t.datum&&e.datum&&(f(t,e)||f(e,t))&&(m=new u("WGS84"),c(t,m,n),t=m),"enu"!==t.axis&&h(t,!1,n),"longlat"===t.projName?(n.x*=i,n.y*=i):(t.to_meter&&(n.x*=t.to_meter,n.y*=t.to_meter),t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=s(t.datum,e.datum,n),e.from_greenwich&&(n.x-=e.from_greenwich),"longlat"===e.projName?(n.x*=r,n.y*=r):(e.forward(n),e.to_meter&&(n.x/=e.to_meter,n.y/=e.to_meter)),"enu"!==e.axis&&h(e,!0,n),n}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":31}],66:[function(t,e,n){function i(t,e,n){t[e]=n.map(function(t){var e={};return r(t,e),e}).reduce(function(t,e){return u(t,e)},{})}function r(t,e){var n;return Array.isArray(t)?(n=t.shift(),"PARAMETER"===n&&(n=t.shift()),void(1===t.length?Array.isArray(t[0])?(e[n]={},r(t[0],e[n])):e[n]=t[0]:t.length?"TOWGS84"===n?e[n]=t:(e[n]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(n)>-1?(e[n]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[n].auth=t[2])):"SPHEROID"===n?(e[n]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[n].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(n)>-1?(t[0]=["name",t[0]],i(e,n,t)):t.every(function(t){return Array.isArray(t)})?i(e,n,t):r(t,e[n])):e[n]=!0)):void(e[t]=!0)}function a(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}function o(t){return t*h}function s(t){function e(e){var n=t.to_meter||1;return parseFloat(e,10)*n}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a);var n=function(e){return a(t,e)},i=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",o],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",o],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",o],["lat0","latitude_of_origin",o],["lat0","standard_parallel_1",o],["lat1","standard_parallel_1",o],["lat2","standard_parallel_2",o],["alpha","azimuth",o],["srsCode","name"]];i.forEach(n),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=o(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var h=.017453292519943295,u=t("./extend");e.exports=function(t,e){var n=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),i=n.shift(),a=n.shift();n.unshift(["name",a]),n.unshift(["type",i]),n.unshift("output");var o={};return r(n,o),s(o.output),u(e,o.output)}},{"./extend":34}],67:[function(t,e,n){function i(t){return t*(Math.PI/180)}function r(t){return 180*(t/Math.PI)}function a(t){var e,n,r,a,o,h,u,l,c,f=t.lat,m=t.lon,p=6378137,M=.00669438,y=.9996,d=i(f),_=i(m);c=Math.floor((m+180)/6)+1,180===m&&(c=60),f>=56&&64>f&&m>=3&&12>m&&(c=32),f>=72&&84>f&&(m>=0&&9>m?c=31:m>=9&&21>m?c=33:m>=21&&33>m?c=35:m>=33&&42>m&&(c=37)),e=6*(c-1)-180+3,l=i(e),n=M/(1-M),r=p/Math.sqrt(1-M*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),o=n*Math.cos(d)*Math.cos(d),h=Math.cos(d)*(_-l),u=p*((1-M/4-3*M*M/64-5*M*M*M/256)*d-(3*M/8+3*M*M/32+45*M*M*M/1024)*Math.sin(2*d)+(15*M*M/256+45*M*M*M/1024)*Math.sin(4*d)-35*M*M*M/3072*Math.sin(6*d));var v=y*r*(h+(1-a+o)*h*h*h/6+(5-18*a+a*a+72*o-58*n)*h*h*h*h*h/120)+5e5,b=y*(u+r*Math.tan(d)*(h*h/2+(5-a+9*o+4*o*o)*h*h*h*h/24+(61-58*a+a*a+600*o-330*n)*h*h*h*h*h*h/720));return 0>f&&(b+=1e7),{northing:Math.round(b),easting:Math.round(v),zoneNumber:c,zoneLetter:s(f)}}function o(t){var e=t.northing,n=t.easting,i=t.zoneLetter,a=t.zoneNumber;if(0>a||a>60)return null;var s,h,u,l,c,f,m,p,M,y,d=.9996,_=6378137,v=.00669438,b=(1-Math.sqrt(1-v))/(1+Math.sqrt(1-v)),g=n-5e5,x=e;"N">i&&(x-=1e7),p=6*(a-1)-180+3,s=v/(1-v),m=x/d,M=m/(_*(1-v/4-3*v*v/64-5*v*v*v/256)),y=M+(3*b/2-27*b*b*b/32)*Math.sin(2*M)+(21*b*b/16-55*b*b*b*b/32)*Math.sin(4*M)+151*b*b*b/96*Math.sin(6*M),h=_/Math.sqrt(1-v*Math.sin(y)*Math.sin(y)),u=Math.tan(y)*Math.tan(y),l=s*Math.cos(y)*Math.cos(y),c=_*(1-v)/Math.pow(1-v*Math.sin(y)*Math.sin(y),1.5),f=g/(h*d);var E=y-h*Math.tan(y)/c*(f*f/2-(5+3*u+10*l-4*l*l-9*s)*f*f*f*f/24+(61+90*u+298*l+45*u*u-252*s-3*l*l)*f*f*f*f*f*f/720);E=r(E);var w=(f-(1+2*u+l)*f*f*f/6+(5-2*l+28*u-3*l*l+8*s+24*u*u)*f*f*f*f*f/120)/Math.cos(y);w=p+r(w);var S;if(t.accuracy){var I=o({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});S={top:I.lat,right:I.lon,bottom:E,left:w}}else S={lat:E,lon:w};return S}function s(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function h(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+u(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function u(t,e,n){var i=l(n),r=Math.floor(t/1e5),a=Math.floor(e/1e5)%20;return c(r,a,i)}function l(t){var e=t%y;return 0===e&&(e=y),e}function c(t,e,n){var i=n-1,r=d.charCodeAt(i),a=_.charCodeAt(i),o=r+t-1,s=a+e,h=!1;o>E&&(o=o-E+v-1,h=!0),(o===b||b>r&&o>b||(o>b||b>r)&&h)&&o++,(o===g||g>r&&o>g||(o>g||g>r)&&h)&&(o++,o===b&&o++),o>E&&(o=o-E+v-1),s>x?(s=s-x+v-1,h=!0):h=!1,(s===b||b>a&&s>b||(s>b||b>a)&&h)&&s++,(s===g||g>a&&s>g||(s>g||g>a)&&h)&&(s++,s===b&&s++),s>x&&(s=s-x+v-1);var u=String.fromCharCode(o)+String.fromCharCode(s);return u}function f(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",a=0;!/[A-Z]/.test(e=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,a++}var o=parseInt(r,10);if(0===a||a+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(a++);if("A">=s||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;i=t.substring(a,a+=2);for(var h=l(o),u=m(i.charAt(0),h),c=p(i.charAt(1),h);c<M(s);)c+=2e6;var f=n-a;if(f%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var y,d,_,v,b,g=f/2,x=0,E=0;return g>0&&(y=1e5/Math.pow(10,g),d=t.substring(a,a+g),x=parseFloat(d)*y,_=t.substring(a+g),E=parseFloat(_)*y),v=x+u,b=E+c,{easting:v,northing:b,zoneLetter:s,zoneNumber:o,accuracy:y}}function m(t,e){for(var n=d.charCodeAt(e-1),i=1e5,r=!1;n!==t.charCodeAt(0);){
if(n++,n===b&&n++,n===g&&n++,n>E){if(r)throw"Bad character: "+t;n=v,r=!0}i+=1e5}return i}function p(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=_.charCodeAt(e-1),i=0,r=!1;n!==t.charCodeAt(0);){if(n++,n===b&&n++,n===g&&n++,n>x){if(r)throw"Bad character: "+t;n=v,r=!0}i+=1e5}return i}function M(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}var y=6,d="AJSAJS",_="AFAFAF",v=65,b=73,g=79,x=86,E=90;n.forward=function(t,e){return e=e||5,h(a({lat:t[1],lon:t[0]}),e)},n.inverse=function(t){var e=o(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},n.toPoint=function(t){var e=o(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},{}],68:[function(t,e,n){e.exports={name:"proj4",version:"2.3.14",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}}},{}],"./includedProjections":[function(t,e,n){e.exports=t("hTEDpn")},{}],hTEDpn:[function(t,e,n){var i=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd")];e.exports=function(t){i.forEach(function(e){t.Proj.projections.add(e)})}},{"./lib/projections/aea":40,"./lib/projections/aeqd":41,"./lib/projections/cass":42,"./lib/projections/cea":43,"./lib/projections/eqc":44,"./lib/projections/eqdc":45,"./lib/projections/gnom":47,"./lib/projections/krovak":48,"./lib/projections/laea":49,"./lib/projections/lcc":50,"./lib/projections/mill":53,"./lib/projections/moll":54,"./lib/projections/nzmg":55,"./lib/projections/omerc":56,"./lib/projections/poly":57,"./lib/projections/sinu":58,"./lib/projections/somerc":59,"./lib/projections/stere":60,"./lib/projections/sterea":61,"./lib/projections/tmerc":62,"./lib/projections/utm":63,"./lib/projections/vandg":64}]},{},[36])(36)})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Sphere=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(14);e.Sphere=function(){function t(e){i(this,t),this._radius=e}return r(t,[{key:"offset",value:function(t,e,n){var i=a.FMath.toRadians(t[1]),r=a.FMath.toRadians(t[0]),o=e/this._radius,s=Math.asin(Math.sin(i)*Math.cos(o)+Math.cos(i)*Math.sin(o)*Math.cos(n)),h=r+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(i),Math.cos(o)-Math.sin(i)*Math.sin(s));return[a.FMath.toDegrees(h),a.FMath.toDegrees(s)]}},{key:"getXYZ",value:function(t,e){var n=a.FMath.toRadians(t),i=a.FMath.toRadians(e),r=this._radius*Math.cos(i),o=r*Math.cos(n),s=r*Math.sin(n),h=this._radius*Math.sin(i);return[o,s,h]}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.FMath=function(){function t(){n(this,t)}return i(t,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"toRadians",value:function(t){return t*Math.PI/180}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.ImageMaterial=function(){function t(e){n(this,t),this._image=e}return i(t,[{key:"setup",value:function(t){this._texture||(this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null))}},{key:"bindTexture",value:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,this._texture)}},{key:"unBind",value:function(t){t.bindTexture(t.TEXTURE_2D,null)}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FillLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(17),h=n(18),u=n(19),l=n(21),c=n(22);e.FillLayer=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._render=new l.LayerRender(t.view.gl,c.LayerShader.fillVertexSource,c.LayerShader.fillFragmentSource),n}return a(e,t),o(e,[{key:"_buildRenderObjects",value:function(){var t=this;this.source.getFill().forEach(function(e){var n=new h.Fill({mesh:new u.FillMesh(e),material:void 0});t._renderObjects.push(n)})}}]),e}(s.Layer)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5);e.Layer=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._source=t.source,n._view=t.view,n._renderObjects=[],n._renderVersion=-1,n._camera=null,n}return a(e,t),o(e,[{key:"render",value:function(t){this._camera=t,this._renderVersion===-1&&this._buildRenderObjects(),this._render.render(this._renderObjects,t),this._renderVersion=this._renderVersion+1}},{key:"source",get:function(){return this._source}}]),e}(s.Observable)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Fill=function(){function t(e){n(this,t),this._mesh=e.mesh,this._material=e.material}return i(t,[{key:"render",value:function(t,e){this._mesh.setup(t);var n=e,i={};i.vertexPositionAttributeLoc=t.getAttribLocation(n,"aVertexPosition"),t.enableVertexAttribArray(i.vertexPositionAttributeLoc),this._mesh.bindPoint(t,i.vertexPositionAttributeLoc);var r=t.getUniformLocation(n,"uColor");t.uniform4f(r,1,0,0,.4),t.drawArrays(t.TRIANGLES,0,this._mesh.count)}}]),t}()},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.FillMesh=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(20),h=n(13);e.FillMesh=function(){function t(e){r(this,t),this._points=e,this._vertices=[],this._radius=o.Const.EARTH_RADIUS+100,this._createMesh()}return a(t,[{key:"_createMesh",value:function(){var t=this,e=new h.Sphere(this._radius),n=[];this._points.forEach(function(t){n.push(t[0],t[1])});var r=new s.Earcut,a=r.getTriangles(n),o=[];a.forEach(function(e){o.push(t._points[e])}),o.forEach(function(n){var r;(r=t._vertices).push.apply(r,i(e.getXYZ(n[0],n[1])))})}},{key:"setup",value:function(t){this.vertexPosBuffer||(this.vertexPosBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._vertices),t.STATIC_DRAW),this.VERTEX_POS_BUF_ITEM_SIZE=3)}},{key:"bindPoint",value:function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.vertexAttribPointer(e,this.VERTEX_POS_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"count",get:function(){return this._vertices.length/3}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function o(t,e,i){n(this,o),this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},a=function(){function t(){n(this,t)}return i(t,[{key:"getTriangles",value:function(t,e,n){var i=n||2,r=e&&e.length,a=r?e[0]*i:t.length,o=this.linkedList(t,0,a,i,!0),s=[];if(!o)return s;var h=void 0,u=void 0,l=void 0,c=void 0,f=void 0,m=void 0,p=void 0;if(r&&(o=this.eliminateHoles(t,e,o,i)),t.length>80*i){h=l=t[0],u=c=t[1];for(var M=i;M<a;M+=i)f=t[M],m=t[M+1],f<h&&(h=f),m<u&&(u=m),f>l&&(l=f),m>c&&(c=m);p=Math.max(l-h,c-u)}return this.earcutLinked(o,s,i,h,u,p),s}},{key:"linkedList",value:function(e,n,i,r,a){var o=void 0,s=void 0;if(a===t._signedArea(e,n,i,r)>0)for(o=n;o<i;o+=r)s=this.insertNode(o,e[o],e[o+1],s);else for(o=i-r;o>=n;o-=r)s=this.insertNode(o,e[o],e[o+1],s);return s&&this.equals(s,s.next)&&(this.removeNode(s),s=s.next),s}},{key:"filterPoints",value:function(t,e){if(!t)return t;var n=e;e||(n=t);var i=t,r=void 0;do if(r=!1,i.steiner||!this.equals(i,i.next)&&0!==this.area(i.prev,i,i.next))i=i.next;else{if(this.removeNode(i),i=n=i.prev,i===i.next)return null;r=!0}while(r||i!==n);return n}},{key:"earcutLinked",value:function(t,e,n,i,r,a,o){var s=t;if(s){!o&&a&&this.indexCurve(s,i,r,a);for(var h=s,u=void 0,l=void 0;s.prev!==s.next;)if(u=s.prev,l=s.next,a?this.isEarHashed(s,i,r,a):this.isEar(s))e.push(u.i/n),e.push(s.i/n),e.push(l.i/n),this.removeNode(s),s=l.next,h=l.next;else if(s=l,s===h){o?1===o?(s=this.cureLocalIntersections(s,e,n),this.earcutLinked(s,e,n,i,r,a,2)):2===o&&this.splitEarcut(s,e,n,i,r,a):this.earcutLinked(this.filterPoints(s),e,n,i,r,a,1);break}}}},{key:"isEar",value:function(t){var e=t.prev,n=t,i=t.next;if(this.area(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(this.pointInTriangle(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&this.area(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}},{key:"isEarHashed",value:function(t,e,n,i){var r=t.prev,a=t,o=t.next;if(this.area(r,a,o)>=0)return!1;var s=void 0;s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x;var h=void 0;h=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y;var u=void 0;u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x;var l=void 0;l=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y;for(var c=this.zOrder(s,h,e,n,i),f=this.zOrder(u,l,e,n,i),m=t.nextZ;m&&m.z<=f;){if(m!==t.prev&&m!==t.next&&this.pointInTriangle(r.x,r.y,a.x,a.y,o.x,o.y,m.x,m.y)&&this.area(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(m=t.prevZ;m&&m.z>=c;){if(m!==t.prev&&m!==t.next&&this.pointInTriangle(r.x,r.y,a.x,a.y,o.x,o.y,m.x,m.y)&&this.area(m.prev,m,m.next)>=0)return!1;m=m.prevZ}return!0}},{key:"cureLocalIntersections",value:function(t,e,n){var i=t,r=t;do{var a=i.prev,o=i.next.next;!this.equals(a,o)&&this.intersects(a,i,i.next,o)&&this.locallyInside(a,o)&&this.locallyInside(o,a)&&(e.push(a.i/n),e.push(i.i/n),e.push(o.i/n),this.removeNode(i),this.removeNode(i.next),i=r=o),i=i.next}while(i!==r);return i}},{key:"splitEarcut",value:function(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&this.isValidDiagonal(o,s)){var h=this.splitPolygon(o,s);return o=this.filterPoints(o,o.next),h=this.filterPoints(h,h.next),this.earcutLinked(o,e,n,i,r,a),void this.earcutLinked(h,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}},{key:"eliminateHoles",value:function(t,e,n,i){var r=n,a=[],o=void 0,s=void 0,h=void 0,u=void 0,l=void 0;for(o=0,s=e.length;o<s;o++)h=e[o]*i,u=o<s-1?e[o+1]*i:t.length,l=this.linkedList(t,h,u,i,!1),l===l.next&&(l.steiner=!0),a.push(this.getLeftmost(l));for(a.sort(this.compareX),o=0;o<a.length;o++)this.eliminateHole(a[o],r),r=this.filterPoints(r,r.next);return r}},{key:"compareX",value:function(t,e){return t.x-e.x}},{key:"eliminateHole",value:function(t,e){var n=this.findHoleBridge(t,e);if(n){var i=this.splitPolygon(n,t);this.filterPoints(i,i.next)}}},{key:"findHoleBridge",value:function(t,e){var n=e,i=t.x,r=t.y,a=-(1/0),o=void 0;do{if(r<=n.y&&r>=n.next.y){var s=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===a)return o.prev;var h=o,u=o.x,l=o.y,c=1/0,f=void 0;for(n=o.next;n!==h;)i>=n.x&&n.x>=u&&this.pointInTriangle(r<l?i:a,r,u,l,r<l?a:i,r,n.x,n.y)&&(f=Math.abs(r-n.y)/(i-n.x),(f<c||f===c&&n.x>o.x)&&this.locallyInside(n,t)&&(o=n,c=f)),n=n.next;return o}},{key:"indexCurve",value:function(t,e,n,i){var r=t;do null===r.z&&(r.z=this.zOrder(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,this.sortLinked(r)}},{key:"sortLinked",value:function(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,h=void 0,u=1,l=t;do{for(n=l,l=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ,i);e++);for(h=u;s>0||h>0&&i;)0===s?(r=i,i=i.nextZ,h--):0!==h&&i?n.z<=i.z?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,h--):(r=n,n=n.nextZ,s--),a?a.nextZ=r:l=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(o>1);return l}},{key:"zOrder",value:function(t,e,n,i,r){var a=t,o=e;return a=32767*(a-n)/r,o=32767*(o-i)/r,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),o=16711935&(o|o<<8),o=252645135&(o|o<<4),o=858993459&(o|o<<2),o=1431655765&(o|o<<1),a|o<<1}},{key:"getLeftmost",value:function(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}},{key:"pointInTriangle",value:function(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}},{key:"isValidDiagonal",value:function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!this.intersectsPolygon(t,e)&&this.locallyInside(t,e)&&this.locallyInside(e,t)&&this.middleInside(t,e)}},{key:"area",value:function(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y}},{key:"intersects",value:function(t,e,n,i){return!!(this.equals(t,e)&&this.equals(n,i)||this.equals(t,i)&&this.equals(n,e))||this.area(t,e,n)>0!=this.area(t,e,i)>0&&this.area(n,i,t)>0!=this.area(n,i,e)>0}},{key:"intersectsPolygon",value:function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&this.intersects(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}},{key:"locallyInside",value:function(t,e){return this.area(t.prev,t,t.next)<0?this.area(t,e,t.next)>=0&&this.area(t,t.prev,e)>=0:this.area(t,e,t.prev)<0||this.area(t,t.next,e)<0}},{key:"middleInside",value:function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}},{key:"splitPolygon",value:function(t,e){var n=t,i=e,a=new r(n.i,n.x,n.y),o=new r(i.i,i.x,i.y),s=n.next,h=i.prev;return n.next=i,i.prev=n,a.next=s,s.prev=a,o.next=a,a.prev=o,h.next=o,o.prev=h,o}},{key:"insertNode",value:function(t,e,n,i){var a=i,o=new r(t,e,n);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o}},{key:"removeNode",value:function(t){var e=t;e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}}],[{key:"deviation",value:function(t,e,n,i){var r=e&&e.length,a=r?e[0]*n:t.length,o=Math.abs(this._signedArea(t,0,a,n));if(r)for(var s=0,h=e.length;s<h;s++){var u=e[s]*n,l=s<h-1?e[s+1]*n:t.length;o-=Math.abs(this._signedArea(t,u,l,n))}for(var c=0,f=0;f<i.length;f+=3){var m=i[f]*n,p=i[f+1]*n,M=i[f+2]*n;c+=Math.abs((t[m]-t[M])*(t[p+1]-t[m+1])-(t[m]-t[p])*(t[M+1]-t[m+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)}},{key:"_signedArea",value:function(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}},{key:"flatten",value:function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[r][a][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}}]),t}();e.Earcut=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LayerRender=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(7);e.LayerRender=function(){function t(e,n,r){i(this,t),this._gl=e,this._vertexSource=n,this._fragmentSource=r,this._shaderProgram=null,this._setup()}return r(t,[{key:"_setup",value:function(){var t=this._gl,e=a.ShaderLoader.loadVertex(t,this._vertexSource),n=a.ShaderLoader.loadFragment(t,this._fragmentSource),i=t.createProgram();t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||console.error("Failed to setup shaders"),this._shaderProgram=i}},{key:"render",value:function(t,e){var n=this._gl,i=this._shaderProgram;n.useProgram(i),this._uploadModels(e),t.forEach(function(t){return t.render(n,i)}),n.flush()}},{key:"_uploadModels",value:function(t){var e=this._gl,n=this._shaderProgram,i=e.getUniformLocation(n,"uMVMatrix"),r=e.getUniformLocation(n,"uPMatrix");e.uniformMatrix4fv(i,!1,t.modelViewMatrix),e.uniformMatrix4fv(r,!1,t.projectionMatrix)}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.LayerShader=function(){function t(){n(this,t)}return i(t,null,[{key:"lineVertexSource",get:function(){return"\n          attribute vec3 aVertexPosition;\n\n          uniform mat4 uMVMatrix;\n          uniform mat4 uPMatrix;\n\n          void main() {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n          } \n        "}},{key:"lineFragmentSource",get:function(){return"\n          precision mediump float;\n\n          uniform vec4 uColor;\n\n          void main() {\n            gl_FragColor = uColor;\n          }\n        "}},{key:"fillVertexSource",get:function(){return"\n          attribute vec3 aVertexPosition;\n\n          uniform mat4 uMVMatrix;\n          uniform mat4 uPMatrix;\n\n          void main() {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n          } \n        "}},{key:"fillFragmentSource",get:function(){return"\n          precision mediump float;\n\n          uniform vec4 uColor;\n\n          void main() {\n            gl_FragColor = uColor;\n          } \n        "}},{key:"pointVertexSource",get:function(){return"\n          attribute vec3 aVertexPosition;\n\n          uniform mat4 uMVMatrix;\n          uniform mat4 uPMatrix;\n\n          void main() {\n            gl_PointSize = 10.0;\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n          } \n        "}},{key:"pointFragmentSource",get:function(){return"\n          precision mediump float;\n\n          uniform vec4 uColor;\n\n          void main() {\n            gl_FragColor = uColor;\n          } \n        "}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LineLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(17),h=n(24),u=n(25),l=n(21),c=n(22);e.LineLayer=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._render=new l.LayerRender(t.view.gl,c.LayerShader.lineVertexSource,c.LayerShader.lineFragmentSource),n}return a(e,t),o(e,[{key:"_buildRenderObjects",value:function(){var t=this;this.source.getLines().forEach(function(e){var n=new h.Line({mesh:new u.LineMesh(e),material:void 0});t._renderObjects.push(n)})}}]),e}(s.Layer)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Line=function(){function t(e){n(this,t),this._mesh=e.mesh,this._material=e.material}return i(t,[{key:"render",value:function(t,e){this._mesh.setup(t);var n=e,i={};i.vertexPositionAttributeLoc=t.getAttribLocation(n,"aVertexPosition"),t.enableVertexAttribArray(i.vertexPositionAttributeLoc),this._mesh.bindPoint(t,i.vertexPositionAttributeLoc);var r=t.getUniformLocation(n,"uColor");t.uniform4f(r,1,0,0,1),t.drawArrays(t.LINE_STRIP,0,this._mesh.count)}}]),t}()},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.LineMesh=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(13);e.LineMesh=function(){function t(e){r(this,t),this._points=e,this._vertices=[],this._radius=o.Const.EARTH_RADIUS+100,this._createMesh()}return a(t,[{key:"_createMesh",value:function(){var t=this,e=new s.Sphere(this._radius);this._points.forEach(function(n){var r;(r=t._vertices).push.apply(r,i(e.getXYZ(n[0],n[1])))})}},{key:"setup",value:function(t){this.vertexPosBuffer||(this.vertexPosBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._vertices),t.STATIC_DRAW),this.VERTEX_POS_BUF_ITEM_SIZE=3)}},{key:"bindPoint",value:function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.vertexAttribPointer(e,this.VERTEX_POS_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"count",get:function(){return this._vertices.length/3}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PointLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(17),h=n(27),u=n(28),l=n(21),c=n(22);e.PointLayer=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._render=new l.LayerRender(t.view.gl,c.LayerShader.pointVertexSource,c.LayerShader.pointFragmentSource),n}return a(e,t),o(e,[{key:"_buildRenderObjects",value:function(){var t=this;this.source.getPoints().forEach(function(e){var n=new h.Point({mesh:new u.PointMesh(e),material:void 0});t._renderObjects.push(n)})}}]),e}(s.Layer)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Point=function(){function t(e){n(this,t),this._mesh=e.mesh,this._material=e.material}return i(t,[{key:"render",value:function(t,e){this._mesh.setup(t);var n=e,i={};i.vertexPositionAttributeLoc=t.getAttribLocation(n,"aVertexPosition"),t.enableVertexAttribArray(i.vertexPositionAttributeLoc),this._mesh.bindPoint(t,i.vertexPositionAttributeLoc);var r=t.getUniformLocation(n,"uColor");t.uniform4f(r,1,1,0,1),t.drawArrays(t.POINTS,0,this._mesh.count)}}]),t}()},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PointMesh=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(13);e.PointMesh=function(){function t(e){r(this,t),this._points=e,this._vertices=[],this._radius=o.Const.EARTH_RADIUS+100,this._createMesh()}return a(t,[{key:"_createMesh",value:function(){var t=this,e=new s.Sphere(this._radius);this._points.forEach(function(n){var r;(r=t._vertices).push.apply(r,i(e.getXYZ(n[0],n[1])))})}},{key:"setup",value:function(t){this.vertexPosBuffer||(this.vertexPosBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._vertices),t.STATIC_DRAW),this.VERTEX_POS_BUF_ITEM_SIZE=3)}},{key:"bindPoint",value:function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.vertexAttribPointer(e,this.VERTEX_POS_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"count",get:function(){return this._vertices.length/3}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CircleLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(17),h=n(24),u=n(30),l=n(21),c=n(22);e.CircleLayer=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._render=new l.LayerRender(t.view.gl,c.LayerShader.lineVertexSource,c.LayerShader.lineFragmentSource),n}return a(e,t),o(e,[{key:"_buildRenderObjects",value:function(){var t=new h.Line({mesh:new u.CircleMesh({center:this.source.getCenter(),radius:this.source.getRadius()}),material:void 0});this._renderObjects.push(t)}}]),e}(s.Layer)},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];
return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CircleMesh=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(13);e.CircleMesh=function(){function t(e){r(this,t),this._points=[],this._circleCenter=e.center,this._steps=o.Const.CIRCLE_BY_STEPS,this._pi2=2*Math.PI,this._vertices=[],this._radius=o.Const.EARTH_RADIUS+100,this._circleRadius=e.radius,this._createMesh()}return a(t,[{key:"_createMesh",value:function(){for(var t=this,e=new s.Sphere(this._radius),n=0;n<=this._steps;n++)this._points.push(e.offset(this._circleCenter,this._circleRadius,this._pi2*n/this._steps));this._points.forEach(function(n){var r;(r=t._vertices).push.apply(r,i(e.getXYZ(n[0],n[1])))})}},{key:"setup",value:function(t){this.vertexPosBuffer||(this.vertexPosBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._vertices),t.STATIC_DRAW),this.VERTEX_POS_BUF_ITEM_SIZE=3)}},{key:"bindPoint",value:function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.vertexAttribPointer(e,this.VERTEX_POS_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"count",get:function(){return this._vertices.length/3}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CircleFillLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(17),h=n(18),u=n(32),l=n(21),c=n(22);e.CircleFillLayer=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return n._render=new l.LayerRender(t.view.gl,c.LayerShader.fillVertexSource,c.LayerShader.fillFragmentSource),n}return a(e,t),o(e,[{key:"_buildRenderObjects",value:function(){var t=new h.Fill({mesh:new u.CircleFillMesh({center:this.source.getCenter(),radius:this.source.getRadius()}),material:void 0});this._renderObjects.push(t)}}]),e}(s.Layer)},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CircleFillMesh=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(13);e.CircleFillMesh=function(){function t(e){r(this,t),this._points=[],this._circleCenter=e.center,this._steps=o.Const.CIRCLE_BY_STEPS,this._pi2=2*Math.PI,this._vertices=[],this._radius=o.Const.EARTH_RADIUS+100,this._circleRadius=e.radius,this._createMesh()}return a(t,[{key:"_createMesh",value:function(){for(var t=this,e=new s.Sphere(this._radius),n=0;n<this._steps;n++){var r=e.offset(this._circleCenter,this._circleRadius,this._pi2*n/this._steps),a=e.offset(this._circleCenter,this._circleRadius,this._pi2*(n+1)/this._steps);this._points.push(r,this._circleCenter,a)}this._points.forEach(function(n){var r;(r=t._vertices).push.apply(r,i(e.getXYZ(n[0],n[1])))})}},{key:"setup",value:function(t){this.vertexPosBuffer||(this.vertexPosBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._vertices),t.STATIC_DRAW),this.VERTEX_POS_BUF_ITEM_SIZE=3)}},{key:"bindPoint",value:function(t,e){t.bindBuffer(t.ARRAY_BUFFER,this.vertexPosBuffer),t.vertexAttribPointer(e,this.VERTEX_POS_BUF_ITEM_SIZE,t.FLOAT,!1,0,0)}},{key:"count",get:function(){return this._vertices.length/3}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TileSource=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),h=n(3);e.TileSource=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._url=t,n._images={},n._waitRequests=[],n._waitRequestsKey={},n._runing=!1,n}return a(e,t),o(e,[{key:"getTileImage",value:function(t,e,n){var i=t+"-"+e+"-"+n;if(this._images[i])return this._images[i];if(this._waitRequestsKey[i])return null;if(this._waitRequests.push({zoom:t,row:e,col:n}),this._waitRequestsKey[i]=!0,!this._runing){this._runing=!0;var r=this._waitRequests[0];this._loadTileImage(r.zoom,r.row,r.col)}return null}},{key:"_loadTileImage",value:function(t,e,n){var i=this,r=t+"-"+e+"-"+n,a=this._url.replace("{x}",n).replace("{y}",e).replace("{z}",t);new Promise(function(t,e){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){t(n)},n.onerror=function(){e("error")},n.src=a}).then(function(a){if(i._images[r]=a,i.trigger(h.Const.SourceEventType.CHANGE,{zoom:t,row:e,col:n,image:a}),i._waitRequests.length>0){var o=i._waitRequests[0];o.zoom===t&&o.row===e&&o.col===n&&i._waitRequests.shift()}if(delete i._waitRequestsKey[r],0===i._waitRequests.length)i._runing=!1;else{i._runing=!0;var s=i._waitRequests[0];i._loadTileImage(s.zoom,s.row,s.col)}})["catch"](function(a){if(console.error(a),i._waitRequests.length>0){var o=i._waitRequests[0];o.zoom===t&&o.row===e&&o.col===n&&i._waitRequests.shift()}if(delete i._waitRequestsKey[r],0===i._waitRequests.length)i._runing=!1;else{i._runing=!0;var s=i._waitRequests[0];i._loadTileImage(s.zoom,s.row,s.col)}})}},{key:"removeWaitRequests",value:function(){this._waitRequests=[],this._waitRequestsKey={}}}]),e}(s.Observable)},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.VectorSource=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(5),u=n(3);e.VectorSource=function(t){function e(t){r(this,e);var n=a(this,Object.getPrototypeOf(e).call(this));return n._id=t.id,n._type=t.type?t.type:void 0,n._features=t.features?t.features:[],n._coordinates=[],n._radius=t.radius,n._center=t.center,n.forRender(),n}return o(e,t),s(e,[{key:"forRender",value:function(){var t=this._features,e=void 0,n=void 0,i=void 0;if(!(t.length<1)){for(var r=0;r<t.length;r++)e=t[r],n=e.geometry,i=n.coords,n.type===u.Const.GeomType.POINT?this._coordinates.push(i):n.type===u.Const.GeomType.LINE?this._coordinates.push(i):n.type===u.Const.GeomType.POLYGON&&this._coordinates.push(i[0]);if(n.type===u.Const.GeomType.POINT){var a=this._coordinates;this._coordinates=[],this._coordinates.push(a)}}}},{key:"addFeature",value:function(t){return this._features.push(t),this.forRender(),this}},{key:"addFeatures",value:function(t){var e;return(e=this._features).push.apply(e,i(t)),this.forRender(),this}},{key:"remoteAllFeatures",value:function(){return this._features=[],this._coordinates=[],this.forRender(),this}},{key:"getFeatures",value:function(){return this._coordinates}},{key:"getLines",value:function(){return this._coordinates}},{key:"getPoints",value:function(){return this._coordinates}},{key:"getFill",value:function(){return this._coordinates}},{key:"getCenter",value:function(){return this._center}},{key:"getRadius",value:function(){return this._radius}}]),e}(h.Observable)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Context=function(){function t(e){n(this,t),this._container=e,this._canvas=document.createElement("canvas"),this._container.appendChild(this._canvas),this._canvas.width=this._container.offsetWidth,this._canvas.height=this._container.offsetHeight,this._gl=this._createWebGLContext()}return i(t,[{key:"_createWebGLContext",value:function(){var t=["webgl","experimental-webgl"],e=null,n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;try{e=this._canvas.getContext(s)}catch(h){console.error("failed to get context: "+h)}if(e)break}}catch(u){i=!0,r=u}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw r}}return e?(e.viewportWidth=this._canvas.width,e.viewportHeight=this._canvas.height):console.error("Failed to create WebGL context!"),e}},{key:"gl",get:function(){return this._gl}},{key:"canvas",get:function(){return this._canvas}}]),t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(37),s=i(o),h=n(3),u=n(14),l=n(13);e.Camera=function(){function t(){r(this,t),this._eyePos={lat:0,lng:0},this._tilt=0,this._fov=60,this._aspect=1,this._distance=2*h.Const.EARTH_RADIUS,this._altitude=this._distance,this._calcProjectionMatrix(),this._calcModelViewMatrix()}return a(t,[{key:"_calcProjectionMatrix",value:function(){this._near=.01*this._altitude;var t=this._altitude+h.Const.EARTH_RADIUS,e=Math.sqrt(t*t-h.Const.EARTH_RADIUS*h.Const.EARTH_RADIUS);this._far=e,this._projectionMatrix=s["default"].mat4.create(),this._projectionMatrix=s["default"].mat4.perspective(this._projectionMatrix,u.FMath.toRadians(this._fov),this._aspect,this._near,this._far)}},{key:"_calcModelViewMatrix",value:function(){this._modelViewMatrix=s["default"].mat4.create(),s["default"].mat4.identity(this._modelViewMatrix);var t=new l.Sphere(h.Const.EARTH_RADIUS+this._altitude),e=t.getXYZ(this._eyePos.lng,this._eyePos.lat);s["default"].mat4.lookAt(this._modelViewMatrix,e,[0,0,0],[0,0,1])}},{key:"setEyeLatitude",value:function(t){var e=t;return t<-90?e=-90:t>90&&(e=90),this._eyePos.lat=e,this._calcModelViewMatrix(),this}},{key:"setEyeLongitude",value:function(t){return this._eyePos.lng=t,this._calcModelViewMatrix(),this}},{key:"setCenter",value:function(t){return this._center=t,this._calcModelViewMatrix(),this}},{key:"_calcTilt",value:function(t,e){var n=h.Const.EARTH_RADIUS+t,i=e,r=h.Const.EARTH_RADIUS;return this._tilt=Math.acos((n*n+i*i-r*r)/(2*n*i)),this}},{key:"zoomByPercent",value:function(t){return t>0?this.distance=this._distance/(1+t):this.distance=this._distance*(1-t),this}},{key:"_calcAltitude",value:function(t,e){var n=Math.sqrt(h.Const.EARTH_RADIUS*h.Const.EARTH_RADIUS+t*t-2*h.Const.EARTH_RADIUS*t*Math.cos(Math.PI-e));this._altitude=n-h.Const.EARTH_RADIUS}},{key:"getGLCoordinate",value:function(t,e){var n=new l.Sphere(h.Const.EARTH_RADIUS),i=n.getXYZ(t,e),r=s["default"].vec4.fromValues(i[0],i[1],i[2],1),a=s["default"].vec4.create();return s["default"].vec4.transformMat4(a,r,this._modelViewMatrix),s["default"].vec4.transformMat4(a,a,this._projectionMatrix),{x:a[0]/a[3],y:a[1]/a[3]}}},{key:"setTarget",value:function(t,e){return this._eyePos.lng=t,this._eyePos.lat=e,this._calcModelViewMatrix(),this}},{key:"getViewRange",value:function(){if(this._altitude/h.Const.EARTH_RADIUS>1)return Math.PI;var t=2*Math.asin(this._altitude/h.Const.EARTH_RADIUS);return t}},{key:"calcAltitude",value:function(t){var e=Math.sin(t/2)*h.Const.EARTH_RADIUS;this._altitude=e,this._calcProjectionMatrix(),this._calcModelViewMatrix()}},{key:"projectionMatrix",get:function(){return this._projectionMatrix}},{key:"modelViewMatrix",get:function(){return this._modelViewMatrix}},{key:"eyeLatitude",get:function(){return this._eyePos.lat}},{key:"eyeLongitude",get:function(){return this._eyePos.lng}},{key:"center",get:function(){return this._center}},{key:"fov",get:function(){return this._fov}},{key:"aspect",get:function(){return this._aspect},set:function(t){return this._aspect=t,this._calcProjectionMatrix(),this}},{key:"near",get:function(){return this._near}},{key:"far",get:function(){return this._far}},{key:"distance",set:function(t){this._distance=t,this._calcAltitude(this._distance,this._tilt),this._calcModelViewMatrix()}},{key:"target",get:function(){return this._eyePos}}]),t}()},function(t,e,n){e.glMatrix=n(38),e.mat2=n(39),e.mat2d=n(40),e.mat3=n(41),e.mat4=n(42),e.quat=n(43),e.vec2=n(46),e.vec3=n(44),e.vec4=n(45)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var i=Math.PI/180;n.toRadian=function(t){return t*i},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){var i=n(38),r={};r.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,e,n,r){var a=new i.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},r.set=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},r.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},r.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*a-r*i;return o?(o=1/o,t[0]=a*o,t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t):null},r.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=n[0],h=n[1],u=n[2],l=n[3];return t[0]=i*s+a*h,t[1]=r*s+o*h,t[2]=i*u+a*l,t[3]=r*u+o*l,t},r.mul=r.multiply,r.rotate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),h=Math.cos(n);return t[0]=i*h+a*s,t[1]=r*h+o*s,t[2]=i*-s+a*h,t[3]=r*-s+o*h,t},r.scale=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=n[0],h=n[1];return t[0]=i*s,t[1]=r*s,t[2]=a*h,t[3]=o*h,t},r.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},r.sub=r.subtract,r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],s=e[0],h=e[1],u=e[2],l=e[3];return Math.abs(n-s)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-h)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-u)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},t.exports=r},function(t,e,n){var i=n(38),r={};r.create=function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,e,n,r,a,o){var s=new i.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=a,s[5]=o,s},r.set=function(t,e,n,i,r,a,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=a,t[5]=o,t},r.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],h=n*a-i*r;return h?(h=1/h,t[0]=a*h,t[1]=-i*h,t[2]=-r*h,t[3]=n*h,t[4]=(r*s-a*o)*h,t[5]=(i*o-n*s)*h,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=n[0],l=n[1],c=n[2],f=n[3],m=n[4],p=n[5];return t[0]=i*u+a*l,t[1]=r*u+o*l,t[2]=i*c+a*f,t[3]=r*c+o*f,t[4]=i*m+a*p+s,t[5]=r*m+o*p+h,t},r.mul=r.multiply,r.rotate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=Math.sin(n),l=Math.cos(n);return t[0]=i*l+a*u,t[1]=r*l+o*u,t[2]=i*-u+a*l,t[3]=r*-u+o*l,t[4]=s,t[5]=h,t},r.scale=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=n[0],l=n[1];return t[0]=i*u,t[1]=r*u,t[2]=a*l,t[3]=o*l,t[4]=s,t[5]=h,t},r.translate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=n[0],l=n[1];return t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=i*u+a*l+s,t[5]=r*u+o*l+h,t},r.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},r.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],h=t[5],u=e[0],l=e[1],c=e[2],f=e[3],m=e[4],p=e[5];return Math.abs(n-u)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-c)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-f)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-m)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(h-p)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))},t.exports=r},function(t,e,n){var i=n(38),r={};r.create=function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},r.clone=function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromValues=function(t,e,n,r,a,o,s,h,u){var l=new i.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=a,l[5]=o,l[6]=s,l[7]=h,l[8]=u,l},r.set=function(t,e,n,i,r,a,o,s,h,u){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=a,t[5]=o,t[6]=s,t[7]=h,t[8]=u,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},r.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],h=e[6],u=e[7],l=e[8],c=l*o-s*u,f=-l*a+s*h,m=u*a-o*h,p=n*c+i*f+r*m;return p?(p=1/p,t[0]=c*p,t[1]=(-l*i+r*u)*p,t[2]=(s*i-r*o)*p,t[3]=f*p,t[4]=(l*n-r*h)*p,t[5]=(-s*n+r*a)*p,t[6]=m*p,t[7]=(-u*n+i*h)*p,t[8]=(o*n-i*a)*p,t):null},r.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],h=e[6],u=e[7],l=e[8];return t[0]=o*l-s*u,t[1]=r*u-i*l,t[2]=i*s-r*o,t[3]=s*h-a*l,t[4]=n*l-r*h,t[5]=r*a-n*s,t[6]=a*u-o*h,t[7]=i*h-n*u,t[8]=n*o-i*a,t},r.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],h=t[7],u=t[8];return e*(u*a-o*h)+n*(-u*r+o*s)+i*(h*r-a*s)},r.multiply=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=n[0],m=n[1],p=n[2],M=n[3],y=n[4],d=n[5],_=n[6],v=n[7],b=n[8];return t[0]=f*i+m*o+p*u,t[1]=f*r+m*s+p*l,t[2]=f*a+m*h+p*c,t[3]=M*i+y*o+d*u,t[4]=M*r+y*s+d*l,t[5]=M*a+y*h+d*c,t[6]=_*i+v*o+b*u,t[7]=_*r+v*s+b*l,t[8]=_*a+v*h+b*c,t},r.mul=r.multiply,r.translate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=n[0],m=n[1];return t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=h,t[6]=f*i+m*o+u,t[7]=f*r+m*s+l,t[8]=f*a+m*h+c,t},r.rotate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=Math.sin(n),m=Math.cos(n);return t[0]=m*i+f*o,t[1]=m*r+f*s,t[2]=m*a+f*h,t[3]=m*o-f*i,t[4]=m*s-f*r,t[5]=m*h-f*a,t[6]=u,t[7]=l,t[8]=c,t},r.scale=function(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},r.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},r.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n+n,s=i+i,h=r+r,u=n*o,l=i*o,c=i*s,f=r*o,m=r*s,p=r*h,M=a*o,y=a*s,d=a*h;return t[0]=1-c-p,t[3]=l-d,t[6]=f+y,t[1]=l+d,t[4]=1-u-p,t[7]=m-M,t[2]=f-y,t[5]=m+M,t[8]=1-u-c,t},r.normalFromMat4=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],h=e[6],u=e[7],l=e[8],c=e[9],f=e[10],m=e[11],p=e[12],M=e[13],y=e[14],d=e[15],_=n*s-i*o,v=n*h-r*o,b=n*u-a*o,g=i*h-r*s,x=i*u-a*s,E=r*u-a*h,w=l*M-c*p,S=l*y-f*p,I=l*d-m*p,P=c*y-f*M,O=c*d-m*M,T=f*d-m*y,D=_*T-v*O+b*P+g*I-x*S+E*w;return D?(D=1/D,t[0]=(s*T-h*O+u*P)*D,t[1]=(h*I-o*T-u*S)*D,t[2]=(o*O-s*I+u*w)*D,t[3]=(r*O-i*T-a*P)*D,t[4]=(n*T-r*I+a*S)*D,t[5]=(i*I-n*O-a*w)*D,t[6]=(M*E-y*x+d*g)*D,t[7]=(y*b-p*E-d*v)*D,t[8]=(p*x-M*b+d*_)*D,t):null},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},r.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],h=t[5],u=t[6],l=t[7],c=t[8],f=e[0],m=e[1],p=e[2],M=e[3],y=e[4],d=e[5],_=t[6],v=e[7],b=e[8];return Math.abs(n-f)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-m)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(a-p)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-M)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(s-y)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(h-d)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(u-_)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-v)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-b)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))},t.exports=r},function(t,e,n){var i=n(38),r={scalar:{},SIMD:{}};r.create=function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var e=new i.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.fromValues=function(t,e,n,r,a,o,s,h,u,l,c,f,m,p,M,y){var d=new i.ARRAY_TYPE(16);return d[0]=t,d[1]=e,d[2]=n,d[3]=r,d[4]=a,d[5]=o,d[6]=s,d[7]=h,d[8]=u,d[9]=l,d[10]=c,d[11]=f,d[12]=m,d[13]=p,d[14]=M,d[15]=y,d},r.set=function(t,e,n,i,r,a,o,s,h,u,l,c,f,m,p,M,y){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=a,t[5]=o,t[6]=s,t[7]=h,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=m,t[13]=p,t[14]=M,t[15]=y,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.scalar.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=a,t[11]=e[14],t[12]=r,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},r.SIMD.transpose=function(t,e){var n,i,r,a,o,s,h,u,l,c;return n=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),o=SIMD.Float32x4.shuffle(n,i,0,1,4,5),s=SIMD.Float32x4.shuffle(r,a,0,1,4,5),h=SIMD.Float32x4.shuffle(o,s,0,2,4,6),u=SIMD.Float32x4.shuffle(o,s,1,3,5,7),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,u),o=SIMD.Float32x4.shuffle(n,i,2,3,6,7),s=SIMD.Float32x4.shuffle(r,a,2,3,6,7),l=SIMD.Float32x4.shuffle(o,s,0,2,4,6),c=SIMD.Float32x4.shuffle(o,s,1,3,5,7),SIMD.Float32x4.store(t,8,l),SIMD.Float32x4.store(t,12,c),t},r.transpose=i.USE_SIMD?r.SIMD.transpose:r.scalar.transpose,r.scalar.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],h=e[6],u=e[7],l=e[8],c=e[9],f=e[10],m=e[11],p=e[12],M=e[13],y=e[14],d=e[15],_=n*s-i*o,v=n*h-r*o,b=n*u-a*o,g=i*h-r*s,x=i*u-a*s,E=r*u-a*h,w=l*M-c*p,S=l*y-f*p,I=l*d-m*p,P=c*y-f*M,O=c*d-m*M,T=f*d-m*y,D=_*T-v*O+b*P+g*I-x*S+E*w;return D?(D=1/D,t[0]=(s*T-h*O+u*P)*D,t[1]=(r*O-i*T-a*P)*D,t[2]=(M*E-y*x+d*g)*D,t[3]=(f*x-c*E-m*g)*D,t[4]=(h*I-o*T-u*S)*D,t[5]=(n*T-r*I+a*S)*D,t[6]=(y*b-p*E-d*v)*D,t[7]=(l*E-f*b+m*v)*D,t[8]=(o*O-s*I+u*w)*D,t[9]=(i*I-n*O-a*w)*D,t[10]=(p*x-M*b+d*_)*D,t[11]=(c*b-l*x-m*_)*D,t[12]=(s*S-o*P-h*w)*D,t[13]=(n*P-i*S+r*w)*D,t[14]=(M*v-p*g-y*_)*D,t[15]=(l*g-c*v+f*_)*D,t):null},r.SIMD.invert=function(t,e){var n,i,r,a,o,s,h,u,l,c,f=SIMD.Float32x4.load(e,0),m=SIMD.Float32x4.load(e,4),p=SIMD.Float32x4.load(e,8),M=SIMD.Float32x4.load(e,12);return o=SIMD.Float32x4.shuffle(f,m,0,1,4,5),i=SIMD.Float32x4.shuffle(p,M,0,1,4,5),n=SIMD.Float32x4.shuffle(o,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,o,1,3,5,7),o=SIMD.Float32x4.shuffle(f,m,2,3,6,7),a=SIMD.Float32x4.shuffle(p,M,2,3,6,7),r=SIMD.Float32x4.shuffle(o,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,o,1,3,5,7),o=SIMD.Float32x4.mul(r,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.mul(i,o),h=SIMD.Float32x4.mul(n,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),s),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),o=SIMD.Float32x4.mul(i,r),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),s),l=SIMD.Float32x4.mul(n,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,o)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),o=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),s),u=SIMD.Float32x4.mul(n,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,o)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.mul(n,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),l),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,o)),o=SIMD.Float32x4.mul(n,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(r,o)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),u),o=SIMD.Float32x4.swizzle(o,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,o),h),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,o)),o=SIMD.Float32x4.mul(n,r),o=SIMD.Float32x4.swizzle(o,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),h),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,o)),
o=SIMD.Float32x4.swizzle(o,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(a,o)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),l),c=SIMD.Float32x4.mul(n,s),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),o=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(o,o),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(o,o))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,h)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,l)),t):null},r.invert=i.USE_SIMD?r.SIMD.invert:r.scalar.invert,r.scalar.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],h=e[6],u=e[7],l=e[8],c=e[9],f=e[10],m=e[11],p=e[12],M=e[13],y=e[14],d=e[15];return t[0]=s*(f*d-m*y)-c*(h*d-u*y)+M*(h*m-u*f),t[1]=-(i*(f*d-m*y)-c*(r*d-a*y)+M*(r*m-a*f)),t[2]=i*(h*d-u*y)-s*(r*d-a*y)+M*(r*u-a*h),t[3]=-(i*(h*m-u*f)-s*(r*m-a*f)+c*(r*u-a*h)),t[4]=-(o*(f*d-m*y)-l*(h*d-u*y)+p*(h*m-u*f)),t[5]=n*(f*d-m*y)-l*(r*d-a*y)+p*(r*m-a*f),t[6]=-(n*(h*d-u*y)-o*(r*d-a*y)+p*(r*u-a*h)),t[7]=n*(h*m-u*f)-o*(r*m-a*f)+l*(r*u-a*h),t[8]=o*(c*d-m*M)-l*(s*d-u*M)+p*(s*m-u*c),t[9]=-(n*(c*d-m*M)-l*(i*d-a*M)+p*(i*m-a*c)),t[10]=n*(s*d-u*M)-o*(i*d-a*M)+p*(i*u-a*s),t[11]=-(n*(s*m-u*c)-o*(i*m-a*c)+l*(i*u-a*s)),t[12]=-(o*(c*y-f*M)-l*(s*y-h*M)+p*(s*f-h*c)),t[13]=n*(c*y-f*M)-l*(i*y-r*M)+p*(i*f-r*c),t[14]=-(n*(s*y-h*M)-o*(i*y-r*M)+p*(i*h-r*s)),t[15]=n*(s*f-h*c)-o*(i*f-r*c)+l*(i*h-r*s),t},r.SIMD.adjoint=function(t,e){var n,i,r,a,o,s,h,u,l,c,f,m,p,n=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12);return l=SIMD.Float32x4.shuffle(n,i,0,1,4,5),s=SIMD.Float32x4.shuffle(r,a,0,1,4,5),o=SIMD.Float32x4.shuffle(l,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,l,1,3,5,7),l=SIMD.Float32x4.shuffle(n,i,2,3,6,7),u=SIMD.Float32x4.shuffle(r,a,2,3,6,7),h=SIMD.Float32x4.shuffle(l,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,l,1,3,5,7),l=SIMD.Float32x4.mul(h,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),c=SIMD.Float32x4.mul(s,l),f=SIMD.Float32x4.mul(o,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,l),c),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),l=SIMD.Float32x4.mul(s,h),l=SIMD.Float32x4.swizzle(l,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),c),p=SIMD.Float32x4.mul(o,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,l)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),c),m=SIMD.Float32x4.mul(o,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(h,l)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),l=SIMD.Float32x4.mul(o,s),l=SIMD.Float32x4.swizzle(l,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),m),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,l),p),l=SIMD.Float32x4.swizzle(l,2,3,0,1),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,l),m),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(h,l)),l=SIMD.Float32x4.mul(o,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(h,l)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),m),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),f),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(s,l)),l=SIMD.Float32x4.mul(o,h),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),f),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,l)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),p),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,m),SIMD.Float32x4.store(t,12,p),t},r.adjoint=i.USE_SIMD?r.SIMD.adjoint:r.scalar.adjoint,r.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],h=t[7],u=t[8],l=t[9],c=t[10],f=t[11],m=t[12],p=t[13],M=t[14],y=t[15],d=e*o-n*a,_=e*s-i*a,v=e*h-r*a,b=n*s-i*o,g=n*h-r*o,x=i*h-r*s,E=u*p-l*m,w=u*M-c*m,S=u*y-f*m,I=l*M-c*p,P=l*y-f*p,O=c*y-f*M;return d*O-_*P+v*I+b*S-g*w+x*E},r.SIMD.multiply=function(t,e,n){var i=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(n,0),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),o))));SIMD.Float32x4.store(t,0,h);var u=SIMD.Float32x4.load(n,4),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),o))));SIMD.Float32x4.store(t,4,l);var c=SIMD.Float32x4.load(n,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),o))));SIMD.Float32x4.store(t,8,f);var m=SIMD.Float32x4.load(n,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,3,3,3,3),o))));return SIMD.Float32x4.store(t,12,p),t},r.scalar.multiply=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=e[9],m=e[10],p=e[11],M=e[12],y=e[13],d=e[14],_=e[15],v=n[0],b=n[1],g=n[2],x=n[3];return t[0]=v*i+b*s+g*c+x*M,t[1]=v*r+b*h+g*f+x*y,t[2]=v*a+b*u+g*m+x*d,t[3]=v*o+b*l+g*p+x*_,v=n[4],b=n[5],g=n[6],x=n[7],t[4]=v*i+b*s+g*c+x*M,t[5]=v*r+b*h+g*f+x*y,t[6]=v*a+b*u+g*m+x*d,t[7]=v*o+b*l+g*p+x*_,v=n[8],b=n[9],g=n[10],x=n[11],t[8]=v*i+b*s+g*c+x*M,t[9]=v*r+b*h+g*f+x*y,t[10]=v*a+b*u+g*m+x*d,t[11]=v*o+b*l+g*p+x*_,v=n[12],b=n[13],g=n[14],x=n[15],t[12]=v*i+b*s+g*c+x*M,t[13]=v*r+b*h+g*f+x*y,t[14]=v*a+b*u+g*m+x*d,t[15]=v*o+b*l+g*p+x*_,t},r.multiply=i.USE_SIMD?r.SIMD.multiply:r.scalar.multiply,r.mul=r.multiply,r.scalar.translate=function(t,e,n){var i,r,a,o,s,h,u,l,c,f,m,p,M=n[0],y=n[1],d=n[2];return e===t?(t[12]=e[0]*M+e[4]*y+e[8]*d+e[12],t[13]=e[1]*M+e[5]*y+e[9]*d+e[13],t[14]=e[2]*M+e[6]*y+e[10]*d+e[14],t[15]=e[3]*M+e[7]*y+e[11]*d+e[15]):(i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=e[9],m=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=m,t[11]=p,t[12]=i*M+s*y+c*d+e[12],t[13]=r*M+h*y+f*d+e[13],t[14]=a*M+u*y+m*d+e[14],t[15]=o*M+l*y+p*d+e[15]),t},r.SIMD.translate=function(t,e,n){var i=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(s,2,2,2,2));var h=SIMD.Float32x4.add(i,SIMD.Float32x4.add(r,SIMD.Float32x4.add(a,o)));return SIMD.Float32x4.store(t,12,h),t},r.translate=i.USE_SIMD?r.SIMD.translate:r.scalar.translate,r.scalar.scale=function(t,e,n){var i=n[0],r=n[1],a=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.SIMD.scale=function(t,e,n){var i,r,a,o=SIMD.Float32x4(n[0],n[1],n[2],0);return i=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(o,0,0,0,0))),r=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(o,1,1,1,1))),a=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(o,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.scale=i.USE_SIMD?r.SIMD.scale:r.scalar.scale,r.rotate=function(t,e,n,r){var a,o,s,h,u,l,c,f,m,p,M,y,d,_,v,b,g,x,E,w,S,I,P,O,T=r[0],D=r[1],k=r[2],F=Math.sqrt(T*T+D*D+k*k);return Math.abs(F)<i.EPSILON?null:(F=1/F,T*=F,D*=F,k*=F,a=Math.sin(n),o=Math.cos(n),s=1-o,h=e[0],u=e[1],l=e[2],c=e[3],f=e[4],m=e[5],p=e[6],M=e[7],y=e[8],d=e[9],_=e[10],v=e[11],b=T*T*s+o,g=D*T*s+k*a,x=k*T*s-D*a,E=T*D*s-k*a,w=D*D*s+o,S=k*D*s+T*a,I=T*k*s+D*a,P=D*k*s-T*a,O=k*k*s+o,t[0]=h*b+f*g+y*x,t[1]=u*b+m*g+d*x,t[2]=l*b+p*g+_*x,t[3]=c*b+M*g+v*x,t[4]=h*E+f*w+y*S,t[5]=u*E+m*w+d*S,t[6]=l*E+p*w+_*S,t[7]=c*E+M*w+v*S,t[8]=h*I+f*P+y*O,t[9]=u*I+m*P+d*O,t[10]=l*I+p*P+_*O,t[11]=c*I+M*P+v*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},r.scalar.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[4],o=e[5],s=e[6],h=e[7],u=e[8],l=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*r+u*i,t[5]=o*r+l*i,t[6]=s*r+c*i,t[7]=h*r+f*i,t[8]=u*r-a*i,t[9]=l*r-o*i,t[10]=c*r-s*i,t[11]=f*r-h*i,t},r.SIMD.rotateX=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(o,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(a,i))),t},r.rotateX=i.USE_SIMD?r.SIMD.rotateX:r.scalar.rotateX,r.scalar.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[0],o=e[1],s=e[2],h=e[3],u=e[8],l=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r-u*i,t[1]=o*r-l*i,t[2]=s*r-c*i,t[3]=h*r-f*i,t[8]=a*i+u*r,t[9]=o*i+l*r,t[10]=s*i+c*r,t[11]=h*i+f*r,t},r.SIMD.rotateY=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var a=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(o,i))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,r))),t},r.rotateY=i.USE_SIMD?r.SIMD.rotateY:r.scalar.rotateY,r.scalar.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),a=e[0],o=e[1],s=e[2],h=e[3],u=e[4],l=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*r+u*i,t[1]=o*r+l*i,t[2]=s*r+c*i,t[3]=h*r+f*i,t[4]=u*r-a*i,t[5]=l*r-o*i,t[6]=c*r-s*i,t[7]=f*r-h*i,t},r.SIMD.rotateZ=function(t,e,n){var i=SIMD.Float32x4.splat(Math.sin(n)),r=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var a=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(o,i))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(a,i))),t},r.rotateZ=i.USE_SIMD?r.SIMD.rotateZ:r.scalar.rotateZ,r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,e,n){var r,a,o,s=n[0],h=n[1],u=n[2],l=Math.sqrt(s*s+h*h+u*u);return Math.abs(l)<i.EPSILON?null:(l=1/l,s*=l,h*=l,u*=l,r=Math.sin(e),a=Math.cos(e),o=1-a,t[0]=s*s*o+a,t[1]=h*s*o+u*r,t[2]=u*s*o-h*r,t[3]=0,t[4]=s*h*o-u*r,t[5]=h*h*o+a,t[6]=u*h*o+s*r,t[7]=0,t[8]=s*u*o+h*r,t[9]=h*u*o-s*r,t[10]=u*u*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=i+i,h=r+r,u=a+a,l=i*s,c=i*h,f=i*u,m=r*h,p=r*u,M=a*u,y=o*s,d=o*h,_=o*u;return t[0]=1-(m+M),t[1]=c+_,t[2]=f-d,t[3]=0,t[4]=c-_,t[5]=1-(l+M),t[6]=p+y,t[7]=0,t[8]=f+d,t[9]=p-y,t[10]=1-(l+m),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},r.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},r.getRotation=function(t,e){var n=e[0]+e[5]+e[10],i=0;return n>0?(i=2*Math.sqrt(n+1),t[3]=.25*i,t[0]=(e[6]-e[9])/i,t[1]=(e[8]-e[2])/i,t[2]=(e[1]-e[4])/i):e[0]>e[5]&e[0]>e[10]?(i=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/i,t[0]=.25*i,t[1]=(e[1]+e[4])/i,t[2]=(e[8]+e[2])/i):e[5]>e[10]?(i=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/i,t[0]=(e[1]+e[4])/i,t[1]=.25*i,t[2]=(e[6]+e[9])/i):(i=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/i,t[0]=(e[8]+e[2])/i,t[1]=(e[6]+e[9])/i,t[2]=.25*i),t},r.fromRotationTranslationScale=function(t,e,n,i){var r=e[0],a=e[1],o=e[2],s=e[3],h=r+r,u=a+a,l=o+o,c=r*h,f=r*u,m=r*l,p=a*u,M=a*l,y=o*l,d=s*h,_=s*u,v=s*l,b=i[0],g=i[1],x=i[2];return t[0]=(1-(p+y))*b,t[1]=(f+v)*b,t[2]=(m-_)*b,t[3]=0,t[4]=(f-v)*g,t[5]=(1-(c+y))*g,t[6]=(M+d)*g,t[7]=0,t[8]=(m+_)*x,t[9]=(M-d)*x,t[10]=(1-(c+p))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,e,n,i,r){var a=e[0],o=e[1],s=e[2],h=e[3],u=a+a,l=o+o,c=s+s,f=a*u,m=a*l,p=a*c,M=o*l,y=o*c,d=s*c,_=h*u,v=h*l,b=h*c,g=i[0],x=i[1],E=i[2],w=r[0],S=r[1],I=r[2];return t[0]=(1-(M+d))*g,t[1]=(m+b)*g,t[2]=(p-v)*g,t[3]=0,t[4]=(m-b)*x,t[5]=(1-(f+d))*x,t[6]=(y+_)*x,t[7]=0,t[8]=(p+v)*E,t[9]=(y-_)*E,t[10]=(1-(f+M))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*S+t[8]*I),t[13]=n[1]+S-(t[1]*w+t[5]*S+t[9]*I),t[14]=n[2]+I-(t[2]*w+t[6]*S+t[10]*I),t[15]=1,t},r.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n+n,s=i+i,h=r+r,u=n*o,l=i*o,c=i*s,f=r*o,m=r*s,p=r*h,M=a*o,y=a*s,d=a*h;return t[0]=1-c-p,t[1]=l+d,t[2]=f-y,t[3]=0,t[4]=l-d,t[5]=1-u-p,t[6]=m+M,t[7]=0,t[8]=f+y,t[9]=m-M,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,e,n,i,r,a,o){var s=1/(n-e),h=1/(r-i),u=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*h,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(r+i)*h,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t},r.perspective=function(t,e,n,i,r){var a=1/Math.tan(e/2),o=1/(i-r);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*o,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,e,n,i){var r=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),h=2/(o+s),u=2/(r+a);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((o-s)*h*.5),t[9]=(r-a)*u*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t},r.ortho=function(t,e,n,i,r,a,o){var s=1/(e-n),h=1/(i-r),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*h,t[14]=(o+a)*u,t[15]=1,t},r.lookAt=function(t,e,n,a){var o,s,h,u,l,c,f,m,p,M,y=e[0],d=e[1],_=e[2],v=a[0],b=a[1],g=a[2],x=n[0],E=n[1],w=n[2];return Math.abs(y-x)<i.EPSILON&&Math.abs(d-E)<i.EPSILON&&Math.abs(_-w)<i.EPSILON?r.identity(t):(f=y-x,m=d-E,p=_-w,M=1/Math.sqrt(f*f+m*m+p*p),f*=M,m*=M,p*=M,o=b*p-g*m,s=g*f-v*p,h=v*m-b*f,M=Math.sqrt(o*o+s*s+h*h),M?(M=1/M,o*=M,s*=M,h*=M):(o=0,s=0,h=0),u=m*h-p*s,l=p*o-f*h,c=f*s-m*o,M=Math.sqrt(u*u+l*l+c*c),M?(M=1/M,u*=M,l*=M,c*=M):(u=0,l=0,c=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=s,t[5]=l,t[6]=m,t[7]=0,t[8]=h,t[9]=c,t[10]=p,t[11]=0,t[12]=-(o*y+s*d+h*_),t[13]=-(u*y+l*d+c*_),t[14]=-(f*y+m*d+p*_),t[15]=1,t)},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},r.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},r.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],h=t[5],u=t[6],l=t[7],c=t[8],f=t[9],m=t[10],p=t[11],M=t[12],y=t[13],d=t[14],_=t[15],v=e[0],b=e[1],g=e[2],x=e[3],E=e[4],w=e[5],S=e[6],I=e[7],P=e[8],O=e[9],T=e[10],D=e[11],k=e[12],F=e[13],R=e[14],C=e[15];return Math.abs(n-v)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(a-g)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-x)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-E)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(h-w)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(u-S)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-I)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(c-P)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-O)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(m-T)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(p-D)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(M-k)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(k))&&Math.abs(y-F)<=i.EPSILON*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(d-R)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(_-C)<=i.EPSILON*Math.max(1,Math.abs(_),Math.abs(C))},t.exports=r},function(t,e,n){var i=n(38),r=n(41),a=n(44),o=n(45),s={};s.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=a.create(),e=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(i,r,o){var h=a.dot(r,o);return h<-.999999?(a.cross(t,e,r),a.length(t)<1e-6&&a.cross(t,n,r),a.normalize(t,t),s.setAxisAngle(i,t,Math.PI),i):h>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(a.cross(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+h,s.normalize(i,i))}}(),s.setAxes=function(){var t=r.create();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=o.clone,s.fromValues=o.fromValues,s.copy=o.copy,s.set=o.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,n){n=.5*n;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t},s.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return 0!=i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n},s.add=o.add,s.multiply=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=n[0],h=n[1],u=n[2],l=n[3];return t[0]=i*l+o*s+r*u-a*h,t[1]=r*l+o*h+a*s-i*u,t[2]=a*l+o*u+i*h-r*s,t[3]=o*l-i*s-r*h-a*u,t},s.mul=s.multiply,s.scale=o.scale,s.rotateX=function(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),h=Math.cos(n);return t[0]=i*h+o*s,t[1]=r*h+a*s,t[2]=a*h-r*s,t[3]=o*h-i*s,t},s.rotateY=function(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),h=Math.cos(n);return t[0]=i*h-a*s,t[1]=r*h+o*s,t[2]=a*h+i*s,t[3]=o*h-r*s,t},s.rotateZ=function(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),h=Math.cos(n);return t[0]=i*h+r*s,t[1]=r*h-i*s,t[2]=a*h+o*s,t[3]=o*h-a*s,t},s.calculateW=function(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t},s.dot=o.dot,s.lerp=o.lerp,s.slerp=function(t,e,n,i){var r,a,o,s,h,u=e[0],l=e[1],c=e[2],f=e[3],m=n[0],p=n[1],M=n[2],y=n[3];return a=u*m+l*p+c*M+f*y,a<0&&(a=-a,m=-m,p=-p,M=-M,y=-y),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-i)*r)/o,h=Math.sin(i*r)/o):(s=1-i,h=i),t[0]=s*u+h*m,t[1]=s*l+h*p,t[2]=s*c+h*M,t[3]=s*f+h*y,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(n,i,r,a,o,h){return s.slerp(t,i,o,h),s.slerp(e,r,a,h),s.slerp(n,t,e,2*h*(1-h)),n}}(),s.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=a*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=o.length,s.len=s.length,s.squaredLength=o.squaredLength,s.sqrLen=s.squaredLength,s.normalize=o.normalize,s.fromMat3=function(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var a=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*a+a]-e[3*o+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+r]+e[3*r+a])*n,t[o]=(e[3*o+r]+e[3*r+o])*n}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=o.exactEquals,s.equals=o.equals,t.exports=s},function(t,e,n){var i=n(38),r={};r.create=function(){var t=new i.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.fromValues=function(t,e,n){var r=new i.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},r.sub=r.subtract,r.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},r.mul=r.multiply,r.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},r.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},r.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},r.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},r.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},r.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)},r.dist=r.distance,r.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},r.len=r.length,r.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},r.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},r.cross=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[0],s=n[1],h=n[2];return t[0]=r*h-a*s,t[1]=a*o-i*h,t[2]=i*s-r*o,t},r.lerp=function(t,e,n,i){var r=e[0],a=e[1],o=e[2];return t[0]=r+i*(n[0]-r),t[1]=a+i*(n[1]-a),t[2]=o+i*(n[2]-o),t},r.hermite=function(t,e,n,i,r,a){var o=a*a,s=o*(2*a-3)+1,h=o*(a-2)+a,u=o*(a-1),l=o*(3-2*a);return t[0]=e[0]*s+n[0]*h+i[0]*u+r[0]*l,t[1]=e[1]*s+n[1]*h+i[1]*u+r[1]*l,t[2]=e[2]*s+n[2]*h+i[2]*u+r[2]*l,t},r.bezier=function(t,e,n,i,r,a){var o=1-a,s=o*o,h=a*a,u=s*o,l=3*a*s,c=3*h*o,f=h*a;return t[0]=e[0]*u+n[0]*l+i[0]*c+r[0]*f,t[1]=e[1]*u+n[1]*l+i[1]*c+r[1]*f,t[2]=e[2]*u+n[2]*l+i[2]*c+r[2]*f,t},r.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI,r=2*i.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t},r.transformMat4=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[3]*i+n[7]*r+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*a+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*a+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*a+n[14])/o,t},r.transformMat3=function(t,e,n){var i=e[0],r=e[1],a=e[2];return t[0]=i*n[0]+r*n[3]+a*n[6],t[1]=i*n[1]+r*n[4]+a*n[7],t[2]=i*n[2]+r*n[5]+a*n[8],t},r.transformQuat=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[0],s=n[1],h=n[2],u=n[3],l=u*i+s*a-h*r,c=u*r+h*i-o*a,f=u*a+o*r-s*i,m=-o*i-s*r-h*a;return t[0]=l*u+m*-o+c*-h-f*-s,t[1]=c*u+m*-s+f*-o-l*-h,t[2]=f*u+m*-h+l*-s-c*-o,t},r.rotateX=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0],a[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),a[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},r.rotateY=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),a[1]=r[1],a[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},r.rotateZ=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),a[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),a[2]=r[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},r.forEach=function(){var t=r.create();return function(e,n,i,r,a,o){var s,h;for(n||(n=3),i||(i=0),h=r?Math.min(r*n+i,e.length):e.length,s=i;s<h;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),r.angle=function(t,e){var n=r.fromValues(t[0],t[1],t[2]),i=r.fromValues(e[0],e[1],e[2]);r.normalize(n,n),r.normalize(i,i);var a=r.dot(n,i);return a>1?0:Math.acos(a)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},r.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=e[0],s=e[1],h=e[2];return Math.abs(n-o)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-h)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))},t.exports=r},function(t,e,n){var i=n(38),r={};r.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.fromValues=function(t,e,n,r){var a=new i.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.set=function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},r.sub=r.subtract,r.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},r.mul=r.multiply,r.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},r.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},r.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},r.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},r.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},r.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+a*a)},r.dist=r.distance,r.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],a=e[3]-t[3];return n*n+i*i+r*r+a*a},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)},r.len=r.length,r.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},r.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=a*o),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},r.lerp=function(t,e,n,i){var r=e[0],a=e[1],o=e[2],s=e[3];return t[0]=r+i*(n[0]-r),t[1]=a+i*(n[1]-a),t[2]=o+i*(n[2]-o),t[3]=s+i*(n[3]-s),t},r.random=function(t,e){return e=e||1,t[0]=i.RANDOM(),t[1]=i.RANDOM(),t[2]=i.RANDOM(),t[3]=i.RANDOM(),r.normalize(t,t),r.scale(t,t,e),t},r.transformMat4=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,t},r.transformQuat=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[0],s=n[1],h=n[2],u=n[3],l=u*i+s*a-h*r,c=u*r+h*i-o*a,f=u*a+o*r-s*i,m=-o*i-s*r-h*a;return t[0]=l*u+m*-o+c*-h-f*-s,t[1]=c*u+m*-s+f*-o-l*-h,t[2]=f*u+m*-h+l*-s-c*-o,t[3]=e[3],t},r.forEach=function(){var t=r.create();return function(e,n,i,r,a,o){var s,h;for(n||(n=4),i||(i=0),h=r?Math.min(r*n+i,e.length):e.length,s=i;s<h;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],s=e[0],h=e[1],u=e[2],l=e[3];return Math.abs(n-s)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-h)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-u)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-l)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(l));
},t.exports=r},function(t,e,n){var i=n(38),r={};r.create=function(){var t=new i.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},r.clone=function(t){var e=new i.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},r.fromValues=function(t,e){var n=new i.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},r.set=function(t,e,n){return t[0]=e,t[1]=n,t},r.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},r.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},r.sub=r.subtract,r.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},r.mul=r.multiply,r.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},r.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},r.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},r.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},r.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},r.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},r.dist=r.distance,r.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},r.len=r.length,r.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},r.normalize=function(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},r.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t},r.lerp=function(t,e,n,i){var r=e[0],a=e[1];return t[0]=r+i*(n[0]-r),t[1]=a+i*(n[1]-a),t},r.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},r.transformMat2=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t},r.transformMat2d=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},r.transformMat3=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t},r.transformMat4=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t},r.forEach=function(){var t=r.create();return function(e,n,i,r,a,o){var s,h;for(n||(n=2),i||(i=0),h=r?Math.min(r*n+i,e.length):e.length,s=i;s<h;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}(),r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r.equals=function(t,e){var n=t[0],r=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))},t.exports=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.DomEvent=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(48);e.DomEvent=function(){function t(){i(this,t)}return a(t,null,[{key:"on",value:function(t,e,n,i){var a=this,s=e;return"object"!==("undefined"==typeof e?"undefined":r(e))&&(s=o.Util.splitWords(e)),s.forEach(function(e){a._on(t,e,n,i)}),this}},{key:"_on",value:function(t,e,n,i){var r=this,a=function(e){return n.call(i||t,e||window.event)},o=a;return"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){var n=e||window.event;r._isExternalTarget(t,n)&&o(n)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,a),this}},{key:"_isExternalTarget",value:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Util=function(){function t(){n(this,t)}return i(t,null,[{key:"trim",value:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}},{key:"splitWords",value:function(e){return t.trim(e).split(/\s+/)}},{key:"isContainsExtent",value:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Dom=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(3);e.Dom=function(){function t(){i(this,t)}return r(t,null,[{key:"setVisible",value:function(t,e){var n=t.style;n.display=e?"":"none"}},{key:"removeChildren",value:function(t){for(var e=t.firstChild;e;)t.removeChild(e),e=t.firstChild}},{key:"getSize",value:function(t){var e=t.offsetWidth,n=t.offsetHeight;if(!e||!n){var i=t.getBoundingClientRect();return[i.right-i.left,i.bottom-i.top]}return[e,n]}},{key:"getOwnerDocument",value:function(t){return t.nodeType===a.Const.DomNodeType.Document?t:t.ownerDocument||t.document}},{key:"getClientViewportElement",value:function(t){return t.documentElement||t.body}},{key:"getDocumentScrollElement",value:function(t){return t.scrollingElement?t.scrollingElement:t.body||t.documentElement}},{key:"getPageOffset",value:function(e){var n=t.getOwnerDocument(e),i=[0,0],r=t.getClientViewportElement(n);if(e===r)return i;var a=e.getBoundingClientRect(),o=t.getDocumentScroll(n);return i.x=a.left+o.x,i.y=a.top+o.y,i}},{key:"getElementRect",value:function(e,n){var i=t.getPageOffset(e);return[i.x,i.y,i.x+n[0],i.y+n[1]]}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(3),h=n(14),u=n(5),l=function(t){function e(t,n){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a._glContext=t,a._camera=n,a._resolutions=[156543.034,78271.517,39135.7585,19567.8792,9783.9396,4891.9698,2445.9849,1222.9925,611.4962,305.7481,152.8741,76.437,38.2185,19.1093,9.5546,4.7773,2.3887,1.1943,.5972,.2986,.1493,.0746,.0373,.0187],a._zoom=0,a.calcZoom(),a}return a(e,t),o(e,[{key:"calcZoom",value:function(){for(var t=this._camera.getViewRange(),e=this._glContext.gl,n=e.viewportHeight>e.viewportWidth?e.viewportWidth:e.viewportHeight,i=2*Math.PI*s.Const.EARTH_RADIUS*(.5*t/Math.PI),r=i/n,a=0,o=this._resolutions.length;a<o;a++){if(Math.abs(this._resolutions[a]-r)<=1e-4){this._zoom=a+1;break}if(this._resolutions[a]<r){this._zoom=a+1;break}}}},{key:"_limitLat",value:function(t){return t>85.5?85.5:t<-85.5?-85.5:t}},{key:"_limitLng",value:function(t){var e=t%360;return e>180?e-=360:e<-180&&(e+=360),e}},{key:"getResolution",value:function(t){return this._resolutions[t-1]}},{key:"zoom",get:function(){return this._zoom}},{key:"viewRange",get:function(){var t=this._camera.getViewRange(),e=h.FMath.toDegrees(t),n=this._camera.target,i=this._limitLat(n.lat-e),r=this._limitLat(n.lat+e),a=this._limitLng(n.lng-e),o=this._limitLng(n.lng+e),s=Math.abs(n.lat);return s>=45&&s<=55?(a=this._limitLng(n.lng-1.5*e),o=this._limitLng(n.lng+1.5*e)):s>=55&&s<=70?(a=this._limitLng(n.lng-1.75*e),o=this._limitLng(n.lng+1.75*e)):s>=70&&(a=this._limitLng(n.lng-2*e),o=this._limitLng(n.lng+2*e)),(Math.abs(r-85.5)<=1e-4||Math.abs(i+85.5)<=1e-4)&&(a=-180,o=180),{minLat:i,maxLat:r,minLng:a,maxLng:o}}},{key:"camera",get:function(){return this._camera}},{key:"gl",get:function(){return this._glContext.gl}}]),e}(u.Observable);e.View=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.AttributionControl=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(52),h=n(47);e.AttributionControl=function(t){function e(){i(this,e);var t=document.getElementById("fe-controls-container"),n=document.createElement("div");n.innerHTML='\n            <div class="fe-attribution-logo">\n            </div>\n            <div class="fe-attribution-copyright">\n                <span>Copyright@2016 F3Earth</span>\n            </div>\n        ',t.appendChild(n);var a=r(this,Object.getPrototypeOf(e).call(this,n));return h.DomEvent.on(a.element,"click",a._clickHandler,a),a}return a(e,t),o(e,[{key:"_clickHandler",value:function(t){t.preventDefault(),t.stopPropagation(),window.open("https://github.com/f3earth/f3earth")}}]),e}(s.Control)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Control=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),h=n(3);e.Control=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._element=t,n._earth=null,n}return a(e,t),o(e,[{key:"setEarth",value:function(t){return this._earth=t,t&&this._earth.on(h.Const.EarthEventType.RENDER_END,this.render,this),this}},{key:"render",value:function(){this.trigger(h.Const.ControlEventType.RENDER)}},{key:"dispose",value:function(){this._earth.un("rendered",this.render,this),this.element.parentNode.removeChild(this._element),this._earth=null}},{key:"earth",get:function(){return this._earth}},{key:"element",get:function(){return this._element}}]),e}(s.Observable)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ZoomControl=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(52),h=n(47);e.ZoomControl=function(t){function e(){i(this,e);var t=document.getElementById("fe-controls-container"),n=document.createElement("div");n.className="fe-control-zoom fe-control",n.innerHTML='<button class="fe-zoom-in" type="button" title="Zoom in">+</button>\n            <button class="fe-zoom-out" type="button" title="Zoom out"></button>\n            <span id="zoom">3</span>',t.appendChild(n);var a=r(this,Object.getPrototypeOf(e).call(this,n)),o=n.getElementsByTagName("button");return a.btnZoomIn=o[0],a.btnZoomOut=o[1],a.zoomLabel=n.getElementsByTagName("span")[0],h.DomEvent.on(a.btnZoomIn,"click",a._zoomIn,a),h.DomEvent.on(a.btnZoomOut,"click",a._zoomOut,a),a}return a(e,t),o(e,[{key:"_zoomIn",value:function(t){t.preventDefault(),t.stopPropagation(),this._earth.setZoom(this._earth.zoom+1),this.zoomLabel.innerHTML=""+this._earth.zoom}},{key:"_zoomOut",value:function(t){t.preventDefault(),t.stopPropagation(),this._earth.setZoom(this._earth.zoom-1),this.zoomLabel.innerHTML=""+this._earth.zoom}}]),e}(s.Control)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DoubleClickZoomInteraction=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(55),h=n(3);e.DoubleClickZoomInteraction=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),o(e,[{key:"addHandle",value:function(){return this._earth.on(h.Const.EarthEventType.DBLCLICK,this._doubleClick,this),this}},{key:"removeHandle",value:function(){return this._earth.un(h.Const.EarthEventType.DBLCLICK,this._doubleClick,this),this}},{key:"_doubleClick",value:function(t){var e=1;t.originalEvent.shiftKey&&(e=-1);var n=this._earth.zoom+e;this._earth.setZoom(n)}}]),e}(s.Interaction)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Interaction=function(){function t(){n(this,t),this._earth=null,this._enabled=!1}return i(t,[{key:"setEarth",value:function(t){return this._earth=t,this}},{key:"getEarth",value:function(){return this._earth}},{key:"enable",value:function(){return this._enabled?this:(this._enabled=!0,this.addHandle(),this)}},{key:"disable",value:function(){return this._enabled?(this._enabled=!1,this.removeHandle(),this):this}},{key:"enabled",value:function(){return!!this._enabled}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DragInteraction=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(55),h=n(3);e.DragInteraction=function(t){function e(){i(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t._isMouseDown=!1,t._prevMouseX=null,t._prevMouseY=null,t}return a(e,t),o(e,[{key:"addHandle",value:function(){return this._earth.on(h.Const.EarthEventType.MOUSEDOWN,this._onmousedown,this).on(h.Const.EarthEventType.MOUSEUP,this._onmouseup,this).on(h.Const.EarthEventType.MOUSEMOVE,this._onmousemove,this).on(h.Const.EarthEventType.MOUSEOVER,this._onmouseout,this),this}},{key:"removeHandle",value:function(){return this._earth.un(h.Const.EarthEventType.MOUSEDOWN,this._onmousedown,this).un(h.Const.EarthEventType.MOUSEUP,this._onmouseup,this).un(h.Const.EarthEventType.MOUSEMOVE,this._onmousemove,this).un(h.Const.EarthEventType.MOUSEOVER,this._onmouseout,this),this}},{key:"_onmousedown",value:function(t){var e=t.originalEvent;this._isMouseDown=!0,this._prevMouseX=e.clientX,this._prevMouseY=e.clientY}},{key:"_onmouseup",value:function(t){this._isMouseDown=!1}},{key:"_onmousemove",value:function(t){var e=t.originalEvent;if(this._isMouseDown){var n=e.clientX-this._prevMouseX,i=e.clientY-this._prevMouseY,r=-n/10%360,a=i/10%360;this._earth.panByDelta(r,a),this._prevMouseX=e.clientX,this._prevMouseY=e.clientY}}},{key:"_onmouseout",value:function(t){this._isMouseDown=!1}}]),e}(s.Interaction)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MouseWheelZoomInteraction=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(55),h=n(3);e.MouseWheelZoomInteraction=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).apply(this,arguments))}return a(e,t),o(e,[{key:"addHandle",value:function(){return this._earth.on(h.Const.EarthEventType.MOUSEWHEEL,this._onmousewheel,this),this}},{key:"removeHandle",value:function(){return this._earth.un(h.Const.EarthEventType.MOUSEWHEEL,this._onmousewheel,this),this}},{key:"_onmousewheel",value:function(t){var e=t.originalEvent,n=-e.deltaY/100,i=this._earth.zoom+n;this._earth.setZoom(i)}}]),e}(s.Interaction)},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Overlay=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(5),u=n(3),l=n(49),c=n(47),f=n(48);e.Overlay=function(t){function e(t){r(this,e);var n=a(this,Object.getPrototypeOf(e).call(this));n._id=t.id,n._earth=null,n._entity=t.entity;var i=document.createElement("DIV");return i.className="fe-overlay-container",i.style.position="absolute",n._element=i,n._style={bottom:"",left:"",right:"",top:"",visible:!0},void 0!==t.element&&n.setElement(t.element),n._coordinate=void 0,n._positioning=u.Const.OverlayPositioning.TOP_LEFT,n._offset=[0,0],void 0!==t.offset&&(n._offset=t.offset),void 0!==t.positioning&&(n._positioning=t.positioning),void 0!==t.coordinate&&(n._coordinate=t.coordinate),n}return o(e,t),s(e,[{key:"setElement",value:function(t){return l.Dom.removeChildren(this._element),t&&(this._element.appendChild(t),this.render()),this}},{key:"setEntity",value:function(t){return this._entity=t,this}},{key:"setCoordinate",value:function(t){this._coordinate!==t&&(this._coordinate=t,this.render())}},{key:"setPositioning",value:function(t){return this._positioning!==t&&(this._positioning=t,this.render()),this}},{key:"setOffset",value:function(t){return this._offset!==t&&(this._offset=t,this.render()),this}},{key:"setId",value:function(t){return this._id=t,this}},{key:"setEarth",value:function(t){return this._earth=t,this}},{key:"appendTo",value:function(t){return t.appendChild(this._element),this.render(),this}},{key:"render",value:function(){var t;if(null===this._earth||void 0===this._coordinate)return void this.setVisible(!1);var e=this._element.style,n=this._earth.size,r=(t=this._earth).getPixelCoordinate.apply(t,i(this._coordinate));console.log(r);var a=this._offset[0],o=this._offset[1],s=l.Dom.getSize(this._element);if(this._positioning===u.Const.OverlayPositioning.BOTTOM_RIGHT||this._positioning===u.Const.OverlayPositioning.CENTER_RIGHT||this._positioning===u.Const.OverlayPositioning.TOP_RIGHT){""!==this._style.left_&&(this._style.left_=e.left="");var h=Math.round(n[0]-r.x-a)+"px";this._style.right!==h&&(this._style.right=e.right=h)}else{""!==this._style.right&&(this._style.right=e.right=""),this._positioning!==u.Const.OverlayPositioning.BOTTOM_CENTER&&this._positioning!==u.Const.OverlayPositioning.CENTER_CENTER&&this._positioning!==u.Const.OverlayPositioning.TOP_CENTER||(a-=s[0]/2);var c=Math.round(r.x+a)+"px";this._style.left!==c&&(this._style.left=e.left=c)}if(this._positioning===u.Const.OverlayPositioning.BOTTOM_LEFT||this._positioning===u.Const.OverlayPositioning.BOTTOM_CENTER||this._positioning===u.Const.OverlayPositioning.BOTTOM_RIGHT){""!==this._style.top&&(this._style.top=e.top="");var f=Math.round(n[1]-r.y-o)+"px";this._style.bottom!==f&&(this._style.bottom=e.bottom=f)}else{""!==this._style.bottom&&(this._style.bottom=e.bottom=""),this._positioning!==u.Const.OverlayPositioning.CENTER_LEFT&&this._positioning!==u.Const.OverlayPositioning.CENTER_CENTER&&this._positioning!==u.Const.OverlayPositioning.CENTER_RIGHT||(o-=s[1]/2);var m=Math.round(r.y+o)+"px";this._style.top!==m&&(this._style.top=e.top=m)}this.setVisible(!0)}},{key:"_panToViewport",value:function(){if(null!==this._earth&&void 0!==this._coordinate){var t=l.Dom.getElementRect(this._earth.container,this._earth.getSize()),e=l.Dom.getElementRect(this._element,l.Dom.getSize(this._element)),n=20;if(!f.Util.containsExtent(t,e)){var i=e[0]-t[0],r=t[2]-e[2],a=e[1]-t[1],o=t[3]-e[3],s=[0,0];i<0?s[0]=i-n:r<0&&(s[0]=Math.abs(r)+n),a<0?s[1]=a-n:o<0&&(s[1]=Math.abs(o)+n),0!==s[0]||0!==s[1]}}}},{key:"setVisible",value:function(t){return l.Dom.setVisible(this._element,t),this._style.visible=t,this}},{key:"on",value:function(t,e){c.DomEvent.on(this._element,t,e,this)}},{key:"dispose",value:function(){this._coordinate=null,this._positioning=null,this._earth=null,this.element.parentNode.removeChild(this._element)}},{key:"element",get:function(){return this._element}},{key:"entity",get:function(){return this._entity}},{key:"coordinate",get:function(){return this._coordinate}},{key:"positioning",get:function(){return this._positioning}},{key:"offset",get:function(){return this._offset}},{key:"id",get:function(){return this._id}}]),e}(h.Observable)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.IconOverlay=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(58);e.IconOverlay=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));n._style={size:void 0===t.size?[36,36]:t.size,margin:void 0===t.margin?0:t.margin,padding:void 0===t.padding?0:t.padding,border:void 0===t.border?"none":t.border,imageUrl:t.imageUrl};var a=document.createElement("div");return a.style="position: absolute;margin: "+n._style.margin+"px; \n        padding: "+n._style.padding+"px;border:"+n._style.border+";overflow: hidden;",a.innerHTML='<img style="display: block;\n        margin-left:'+n._style.margin+"px;margin-top:"+n._style.margin+"px;\n        width:"+n._style.size[0]+"px; height:"+n._style.size[1]+"px;\n        left:"+n._offset[0]+"px;top:"+n._offset[1]+'px;" src="'+n._style.imageUrl+'"/>',n.setElement(a),n._imageElement=a.getElementsByTagName("img")[0],n}return a(e,t),o(e,[{key:"setImage",value:function(t){this._style.imageUrl=t,this._imageElement.setAttribute("src",t)}}]),e}(s.Overlay)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LabelOverlay=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(58);e.LabelOverlay=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));n._style={size:void 0===t.size?[36,36]:t.sizewidth,margin:void 0===t.margin?0:t.margin,padding:void 0===t.padding?0:t.padding,border:void 0===t.border?"1px solid rgb(0, 0, 0)":t.border,bgCorlor:void 0===t.bgCorlor?"#CCFFBF":t.bgCorlor,color:void 0===t.color?"#050805":t.color,fontSize:void 0===t.fontSize?12:t.fontSize,fontFamily:void 0===t.fontFamily?"Georgia, serif":t.fontFamily,fontStyle:void 0===t.fontStyle?"normal":t.fontStyle,fontWeight:void 0===t.fontWeight?"normal":t.fontWeight,content:t.content};var a=document.createElement("div");return a.style="position: absolute;margin: "+n._style.margin+"px; \n        padding: "+n._style.padding+"px;overflow: hidden;\n        left:"+n.offset[0]+"px;top:"+n.offset[1]+"px;",a.innerHTML='<label style="-moz-user-select: none; \n        display: inline;cursor: inherit; background-color: '+n._style.bgCorlor+"; \n        border: "+n._style.border+";padding: 1px; white-space: nowrap; \n        font-family:"+n._style.fontFamily+";font-size:"+n._style.fontSize+";\n        font-weight:"+n._style.fontWeight+";font-style:"+n._style.fontStyle+";z-index: 100;\n        color:"+n._style.color+';">'+n._style.content+"</label>",n.setElement(a),n._labelElement=a.getElementsByTagName("label")[0],n}return a(e,t),o(e,[{key:"setContent",value:function(t){this._style.content=t,this._labelElement.innerHTML=t}}]),e}(s.Overlay)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerOverlay=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(58);e.MarkerOverlay=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));n._label=t.label,n._icon=t.icon,n._style={size:void 0===t.size?[36,36]:t.size,margin:void 0===t.margin?0:t.margin,padding:void 0===t.padding?0:t.padding,border:void 0===t.border?"0px none":t.border};var a=document.createElement("span");return a.style="margin: "+n._style.margin+"px; \n        padding: "+n._style.padding+"px;overflow: hidden;border: 0px none; \n        width: 0px; height: 0px; -moz-user-select: none;",n._icon&&a.appendChild(n._icon.element.firstChild),n._label&&a.appendChild(n._label.element.firstChild),n.setElement(a),n}return a(e,t),o(e,[{key:"lable",get:function(){return this._label}},{key:"icon",get:function(){return this._icon}}]),e}(s.Overlay)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PopupOverlay=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(58),h=n(3),u=n(47);e.PopupOverlay=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));n._style={content:t.content};var a=document.createElement("div");return a.className="fe-popup",a.innerHTML='<a href="#" class="fe-popup-closer"></a>\n        <div>'+n._style.content+"</div>",n.setElement(a),n._closeElement=a.getElementsByTagName("a")[0],n._contentElement=a.getElementsByTagName("div")[0],u.DomEvent.on(n._closeElement,h.Const.DomEventType.CLICK,n._handleCloseElementClick,n),n}return a(e,t),o(e,[{key:"_handleCloseElementClick",value:function(t){return t.preventDefault(),t.stopPropagation(),this.setVisible(!1),!1}},{key:"setContent",value:function(t){this._style.content=t,this._contentElement.innerHTML=t}}]),e}(s.Overlay)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayLayer=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(3);e.OverlayLayer=function(){function t(e){i(this,t),this._id=e.id,this._container=e.container,this._earth=null,this._overlays=[]}return r(t,[{key:"addOverlay",value:function(t){return t.setEarth(this._earth),this._overlays.push(t),t.appendTo(this._container),t}},{key:"removeOverlay",value:function(t){for(var e=0,n=this._overlays.length;e<n;e++)if(this._overlays[e]===t){t.dispose(),this._overlays.splice(e,1);break}}},{key:"clear",value:function(){this._overlays.forEach(function(t){t.dispose()}),this._overlays=[]}},{key:"setEarth",value:function(t){return this._earth=t,this._earth&&this._earth.on(a.Const.EarthEventType.RENDER_END,this._handleEarthRendered,this),this}},{key:"_handleEarthRendered",value:function(){this._overlays.forEach(function(t){return t.render()})}},{key:"dispose",value:function(){this.clear(),this._earth=null,this._earth.un("rendered",this._handleEarthRendered,this)}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Format=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),h=n(3),u=n(65),l=n(67),c=n(68),f=n(69);e.Format=function(t){function e(){i(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t.TypeTable={Point:h.Const.LayerType.POINT,LineString:h.Const.LayerType.LINE,Polygon:h.Const.LayerType.FILL},t._features=[],t._geometryType="",t}return a(e,t),o(e,[{key:"createLayerConfig",value:function(){var t={};return t.type=this.TypeTable[this._geometryType],t.source={id:1,features:this._features.concat(),type:t.type},this._features=[],this._geometryType="",t}},{key:"readFeatures",value:function(t){}},{key:"createPoint",value:function(t,e){return new u.Feature(new l.Point(t),e)}},{key:"createLine",value:function(t,e){return new u.Feature(new c.LineString(t),e)}},{key:"createPolygon",value:function(t,e){return new u.Feature(new f.Polygon(t),e)}},{key:"createLines",value:function(t,e){}},{key:"createPolygons",value:function(t,e){}},{key:"writeFeatures",value:function(t){}}]),e}(s.Observable)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Feature=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),h=n(66);e.Feature=function(t){function e(t,n,a){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o._fid=a,o._geometry=t,o._attr=n,o}return a(e,t),o(e,[{key:"setGeom",value:function(t){return t instanceof h.Geometry&&(this._geometry=t),this}},{key:"setAttr",value:function(t){return t instanceof Object&&(this._attr=t),this}},{key:"fid",get:function(){return this._fid}},{key:"geometry",get:function(){return this._geometry}},{key:"attr",get:function(){return this._attr}}]),e}(s.Observable)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.Geometry=function(){function t(e){n(this,t),e instanceof Array&&(this._coords=e),this._type=null}return i(t,[{key:"setCoords",value:function(t){return t instanceof Array?this._coords=t:console.log("input coordinates must be Array"),this}},{key:"coords",get:function(){return this._coords}},{key:"type",get:function(){return this._type}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(3),h=n(66);e.Point=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return t instanceof Array&&(n._coords=t),n._type=s.Const.GeomType.POINT,n}return a(e,t),o(e,[{key:"setCoords",value:function(t){return t instanceof Array&&(this._coords=t),this}},{key:"coords",get:function(){return this._coords}},{key:"type",get:function(){return this._type}}]),e}(h.Geometry)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LineString=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(3),h=n(66);e.LineString=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return t instanceof Array&&(n._coords=t),n._type=s.Const.GeomType.LINE,n}return a(e,t),o(e,[{key:"setCoords",value:function(t){return t instanceof Array&&(this._coords=t),this}},{key:"coords",get:function(){return this._coords}},{key:"type",get:function(){return this._type}}]),e}(h.Geometry)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(3),h=n(66);e.Polygon=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this,t));return t instanceof Array&&(n._coords=t),n._type=s.Const.GeomType.POLYGON,n}return a(e,t),o(e,[{key:"setCoords",value:function(t){return t instanceof Array&&(this._coords=t),this}},{key:"coords",get:function(){return this._coords}},{key:"type",get:function(){return this._type}}]),e}(h.Geometry)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoJSON=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(64),u=n(3),l=n(65),c=n(67),f=n(68),m=n(69);e.GeoJSON=function(t){function e(){i(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t._ext=["json","geojson"],t}return a(e,t),s(e,[{key:"readFeatures",value:function(t){var e=void 0,n=[],i=void 0,r=void 0,a={};if(a="object"!==("undefined"==typeof t?"undefined":o(t))?JSON.parse(t):t,"FeatureCollection"===a.type&&a.features.length>0)for(var s=0;s<a.features.length;s++)switch(r=a.features[s],e=r.geometry.type,n=r.geometry.coordinates,i=r.properties,e){case"Point":this._features.push(new l.Feature(new c.Point(n),i));break;case"LineString":this._features.push(new l.Feature(new f.LineString(n),i));break;case"MultiLineString":e=u.Const.GeomType.LINE,this.createLines(n,i);break;case"Polygon":this._features.push(new l.Feature(new m.Polygon(n),i));break;case"MultiPolygon":e=u.Const.GeomType.POLYGON,this.createPolygons(n,i);break;default:throw new Error("Invalid GeoJSON object.")}return this._geometryType=e,this}},{key:"createLines",value:function(t,e){var n=this;t.forEach(function(t){return n._features.push(new l.Feature(new f.LineString(t),e))})}},{key:"createPolygons",value:function(t,e){var n=this;t.forEach(function(t){return n._features.push(new l.Feature(new m.Polygon(t),e))})}},{key:"writeFeatures",value:function(t){}}]),e}(h.Format)}])});